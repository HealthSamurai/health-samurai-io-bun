// Datastar Pro Demo v1.0.0-RC.7 â€“ THIS VERSION OF DATASTAR PRO IS FOR DEMO PURPOSES ONLY!
var yn=e=>{throw TypeError(e)};var xt=(e,t,n)=>t.has(e)||yn("Cannot "+n);var O=(e,t,n)=>(xt(e,t,"read from private field"),n?n.call(e):t.get(e)),ie=(e,t,n)=>t.has(e)?yn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),z=(e,t,n,r)=>(xt(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Lt=(e,t,n)=>(xt(e,t,"access private method"),n);var bn=/ðŸ–•JS_DSðŸš€/.source,Mt=bn.slice(0,5),Ft=bn.slice(4),ge="datastar-fetch",ue="datastar-signal-patch";var B=Object.hasOwn??Object.prototype.hasOwnProperty.call;var we=e=>e!==null&&typeof e=="object"&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null),lt=e=>{for(let t in e)if(B(e,t))return!1;return!0},_e=(e,t)=>{for(let n in e){let r=e[n];we(r)||Array.isArray(r)?_e(r,t):e[n]=t(r)}},ut=e=>{let t={};for(let[n,r]of e){let o=n.split("."),s=o.pop(),i=o.reduce((a,l)=>a[l]??={},t);i[s]=r}return t};var ft=[],Ot=[],yt=0,dt=0,Pt=0,It,he,pt=0,W=()=>{yt++},U=()=>{--yt||(En(),Ce())},ee=e=>{It=he,he=e},te=()=>{he=It,It=void 0},Je=e=>Hr.bind(0,{previousValue:e,t:e,e:1}),Ht=Symbol("computed"),Ie=e=>{let t=Dr.bind(0,{e:17,getter:e});return t[Ht]=1,t},I=e=>{let t={d:e,e:2};he&&Vt(t,he),ee(t),W();try{t.d()}finally{U(),te()}return Cn.bind(0,t)},En=()=>{for(;dt<Pt;){let e=Ot[dt];Ot[dt++]=void 0,wn(e,e.e&=-65)}dt=0,Pt=0},vn=e=>"getter"in e?An(e):Tn(e,e.t),An=e=>{ee(e),Rn(e);try{let t=e.t;return t!==(e.t=e.getter(t))}finally{te(),kn(e)}},Tn=(e,t)=>(e.e=1,e.previousValue!==(e.previousValue=t)),Dt=e=>{let t=e.e;if(!(t&64)){e.e=t|64;let n=e.r;n?Dt(n.i):Ot[Pt++]=e}},wn=(e,t)=>{if(t&16||t&32&&$n(e.o,e)){ee(e),Rn(e),W();try{e.d()}finally{U(),te(),kn(e)}return}t&32&&(e.e=t&-33);let n=e.o;for(;n;){let r=n.c,o=r.e;o&64&&wn(r,r.e=o&-65),n=n.s}},Hr=(e,...t)=>{if(t.length){if(e.t!==(e.t=t[0])){e.e=17;let r=e.r;return r&&(Vr(r),yt||En()),!0}return!1}let n=e.t;if(e.e&16&&Tn(e,n)){let r=e.r;r&&ht(r)}return he&&Vt(e,he),n},Dr=e=>{let t=e.e;if(t&16||t&32&&$n(e.o,e)){if(An(e)){let n=e.r;n&&ht(n)}}else t&32&&(e.e=t&-33);return he&&Vt(e,he),e.t},Cn=e=>{let t=e.o;for(;t;)t=gt(t,e);let n=e.r;n&&gt(n),e.e=0},Vt=(e,t)=>{let n=t.a;if(n&&n.c===e)return;let r=n?n.s:t.o;if(r&&r.c===e){r.p=pt,t.a=r;return}let o=e.m;if(o&&o.p===pt&&o.i===t)return;let s=t.a=e.m={p:pt,c:e,i:t,l:n,s:r,u:o};r&&(r.l=s),n?n.s=s:t.o=s,o?o.n=s:e.r=s},gt=(e,t=e.i)=>{let n=e.c,r=e.l,o=e.s,s=e.n,i=e.u;if(o?o.l=r:t.a=r,r?r.s=o:t.o=o,s?s.u=i:n.m=i,i)i.n=s;else if(!(n.r=s))if("getter"in n){let a=n.o;if(a){n.e=17;do a=gt(a,n);while(a)}}else"previousValue"in n||Cn(n);return o},Vr=e=>{let t=e.n,n;e:for(;;){let r=e.i,o=r.e;if(o&60?o&12?o&4?!(o&48)&&qr(e,r)?(r.e=o|40,o&=1):o=0:r.e=o&-9|32:o=0:r.e=o|32,o&2&&Dt(r),o&1){let s=r.r;if(s){let i=(e=s).n;i&&(n={t,f:n},t=i);continue}}if(e=t){t=e.n;continue}for(;n;)if(e=n.t,n=n.f,e){t=e.n;continue e}break}},Rn=e=>{pt++,e.a=void 0,e.e=e.e&-57|4},kn=e=>{let t=e.a,n=t?t.s:e.o;for(;n;)n=gt(n,e);e.e&=-5},$n=(e,t)=>{let n,r=0,o=!1;e:for(;;){let s=e.c,i=s.e;if(t.e&16)o=!0;else if((i&17)===17){if(vn(s)){let a=s.r;a.n&&ht(a),o=!0}}else if((i&33)===33){(e.n||e.u)&&(n={t:e,f:n}),e=s.o,t=s,++r;continue}if(!o){let a=e.s;if(a){e=a;continue}}for(;r--;){let a=t.r,l=a.n;if(l?(e=n.t,n=n.f):e=a,o){if(vn(t)){l&&ht(a),t=e.i;continue}o=!1}else t.e&=-33;if(t=e.i,e.s){e=e.s;continue e}}return o}},ht=e=>{do{let t=e.i,n=t.e;(n&48)===32&&(t.e=n|16,n&2&&Dt(t))}while(e=e.n)},qr=(e,t)=>{let n=t.a;for(;n;){if(n===e)return!0;n=n.l}return!1},He=e=>{let t=V,n=e.split(".");for(let r of n){if(t==null||!B(t,r))return;t=t[r]}return t},mt=(e,t="")=>{let n=Array.isArray(e);if(n||we(e)){let r=n?[]:{};for(let s in e)r[s]=Je(mt(e[s],`${t+s}.`));let o=Je(0);return new Proxy(r,{get(s,i){if(!(i==="toJSON"&&!B(r,i)))return n&&i in Array.prototype?(o(),r[i]):typeof i=="symbol"?r[i]:((!B(r,i)||r[i]()==null)&&(r[i]=Je(""),Ce(t+i,""),o(o()+1)),r[i]())},set(s,i,a){let l=t+i;if(n&&i==="length"){let u=r[i]-a;if(r[i]=a,u>0){let c={};for(let d=a;d<r[i];d++)c[d]=null;Ce(t.slice(0,-1),c),o(o()+1)}}else if(B(r,i))if(a==null)delete r[i];else if(B(a,Ht))r[i]=a,Ce(l,"");else{let u=r[i](),c=`${l}.`;if(we(u)&&we(a)){for(let d in u)B(a,d)||(delete u[d],Ce(c+d,null));for(let d in a){let h=a[d];u[d]!==h&&(u[d]=h)}}else r[i](mt(a,c))&&Ce(l,a)}else a!=null&&(B(a,Ht)?(r[i]=a,Ce(l,"")):(r[i]=Je(mt(a,`${l}.`)),Ce(l,a)),o(o()+1));return!0},deleteProperty(s,i){return delete r[i],o(o()+1),!0},ownKeys(){return o(),Reflect.ownKeys(r)},has(s,i){return o(),i in r}})}return e},Ce=(e,t)=>{if(e!==void 0&&t!==void 0&&ft.push([e,t]),!yt&&ft.length){let n=ut(ft);ft.length=0,document.dispatchEvent(new CustomEvent(ue,{detail:n}))}},Q=(e,{ifMissing:t}={})=>{W();for(let n in e)e[n]==null?t||delete V[n]:_n(e[n],n,V,"",t);U()},H=(e,t)=>Q(ut(e),t),_n=(e,t,n,r,o)=>{if(we(e)){B(n,t)&&(we(n[t])||Array.isArray(n[t]))||(n[t]={});for(let s in e)e[s]==null?o||delete n[t][s]:_n(e[s],s,n[t],`${r+t}.`,o)}else o&&B(n,t)||(n[t]=e)},Sn=e=>typeof e=="string"?RegExp(e.replace(/^\/|\/$/g,"")):e,Z=({include:e=/.*/,exclude:t=/(?!)/}={},n=V)=>{let r=Sn(e),o=Sn(t),s=[],i=[[n,""]];for(;i.length;){let[a,l]=i.pop();for(let u in a){let c=l+u;we(a[u])?i.push([a[u],`${c}.`]):r.test(c)&&!o.test(c)&&s.push([c,He(c)])}}return ut(s)},V=mt({});var ye=e=>e instanceof HTMLElement||e instanceof SVGElement||e instanceof MathMLElement;var ae=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([a-z])([0-9]+)/gi,"$1-$2").replace(/([0-9]+)([a-z])/gi,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),De=e=>ae(e).replace(/-./g,t=>t[1].toUpperCase()),be=e=>ae(e).replace(/-/g,"_"),Nn=e=>De(e).replace(/(^.|(?<=\.).)/g,t=>t[0].toUpperCase()),xn=e=>e.replace(/\b\w/g,t=>t.toUpperCase()),fe=e=>{try{return JSON.parse(e)}catch{return Function(`return (${e})`)()}},Ln={camel:e=>e.replace(/-[a-z]/g,t=>t[1].toUpperCase()),snake:e=>e.replace(/-/g,"_"),pascal:e=>e[0].toUpperCase()+Ln.camel(e.slice(1))},X=(e,t,n="camel")=>{for(let r of t.get("case")||[n])e=Ln[r]?.(e)||e;return e},ve=e=>`data-${e}`;var jr="https://data-star.dev/errors",Ze=(e,t,n={})=>{Object.assign(n,e);let r=new Error,o=be(t),s=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),i=JSON.stringify(n,null,2);return r.message=`${t}
More info: ${jr}/${o}?${s}
Context: ${i}`,r},Ye=new Map,qt=new Map,Fn=new Map,Xe=new Proxy({},{get:(e,t)=>Ye.get(t)?.apply,has:(e,t)=>Ye.has(t),ownKeys:()=>Reflect.ownKeys(Ye),set:()=>!1,deleteProperty:()=>!1}),Qe=new Map,bt=[],jt=new Set,Wt=new WeakSet,_=e=>{bt.push(e),bt.length===1&&setTimeout(()=>{for(let t of bt)jt.add(t.name),qt.set(t.name,t);bt.length=0,Ur(),jt.clear()})},G=e=>{Ye.set(e.name,e)};document.addEventListener(ge,e=>{let t=Fn.get(e.detail.type);t&&t.apply({error:Ze.bind(0,{plugin:{type:"watcher",name:t.name},element:{id:e.target.id,tag:e.target.tagName}})},e.detail.argsRaw)});var et=e=>{Fn.set(e.name,e)},Mn=e=>{for(let t of e){let n=Qe.get(t);if(n&&Qe.delete(t))for(let r of n.values())for(let o of r.values())o()}},On=ve("ignore"),Br=`[${On}]`,Pn=e=>e.hasAttribute(`${On}__self`)||!!e.closest(Br),Ve=(e,t)=>{for(let n of e)if(!Pn(n)){let r=new Set;for(let o in n.dataset){let s=o.replace(/[A-Z]/g,"-$&").toLowerCase();r.add(s),Bt(n,s,n.dataset[o],t)}for(let o of Array.from(n.attributes)){if(!o.name.startsWith("data-"))continue;let s=o.name.slice(5);r.has(s)||Bt(n,s,o.value,t)}}},Wr=e=>{for(let{target:t,type:n,attributeName:r,addedNodes:o,removedNodes:s}of e)if(n==="childList"){for(let i of s)ye(i)&&(Mn([i]),Mn(i.querySelectorAll("*")));for(let i of o)ye(i)&&(Ve([i]),Ve(i.querySelectorAll("*")))}else if(n==="attributes"&&r.startsWith("data-")&&ye(t)&&!Pn(t)){let i=r.slice(5),a=t.getAttribute(r);if(a===null){let l=Qe.get(t);if(l){let u=l.get(i);if(u){for(let c of u.values())c();l.delete(i)}}}else Bt(t,i,a)}},In=new MutationObserver(Wr),vt=e=>{let[t,...n]=e.split("__"),[r,o]=t.split(/:(.+)/),s=new Map;for(let i of n){let[a,...l]=i.split(".");s.set(a,new Set(l))}return{pluginName:r,key:o,mods:s}},Hn=()=>Wt.has(document.documentElement),Ur=(e=document.documentElement,t=!0)=>{ye(e)&&Ve([e],!0),Ve(e.querySelectorAll("*"),!0),t&&(In.observe(e,{subtree:!0,childList:!0,attributes:!0}),Wt.add(e))},Se=(e=document.documentElement,t=!0)=>{ye(e)&&Ve([e]),Ve(e.querySelectorAll("*")),t&&(In.observe(e,{subtree:!0,childList:!0,attributes:!0}),Wt.add(e))},Bt=(e,t,n,r)=>{{let o=t,{pluginName:s,key:i,mods:a}=vt(o),l=qt.get(s);if((!r||jt.has(s))&&!!l){let c={el:e,rawKey:o,mods:a,error:Ze.bind(0,{plugin:{type:"attribute",name:l.name},element:{id:e.id,tag:e.tagName},expression:{rawKey:o,key:i,value:n}}),key:i,value:n,loadedPluginNames:{actions:new Set(Ye.keys()),attributes:new Set(qt.keys())},rx:void 0},d=l.requirement&&(typeof l.requirement=="string"?l.requirement:l.requirement.key)||"allowed",h=l.requirement&&(typeof l.requirement=="string"?l.requirement:l.requirement.value)||"allowed",f=i!=null&&i!=="",p=n!=null&&n!=="";if(f){if(d==="denied")throw c.error("KeyNotAllowed")}else if(d==="must")throw c.error("KeyRequired");if(p){if(h==="denied")throw c.error("ValueNotAllowed")}else if(h==="must")throw c.error("ValueRequired");if(d==="exclusive"||h==="exclusive"){if(f&&p)throw c.error("KeyAndValueProvided");if(!f&&!p)throw c.error("KeyOrValueRequired")}let g=new Map;if(p){let v;c.rx=(...N)=>(v||(v=Gr(n,{returnsValue:l.returnsValue,argNames:l.argNames,cleanups:g})),v(e,...N))}let y=l.apply(c);y&&g.set("attribute",y);let m=Qe.get(e);if(m){let v=m.get(o);if(v)for(let N of v.values())N()}else m=new Map,Qe.set(e,m);m.set(o,g)}}},Gr=(e,{returnsValue:t=!1,argNames:n=[],cleanups:r=new Map}={})=>{let o="";if(t){let l=/(\/(\\\/|[^/])*\/|"(\\"|[^"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|\(\s*((function)\s*\(\s*\)|(\(\s*\))\s*=>)\s*(?:\{[\s\S]*?\}|[^;){]*)\s*\)\s*\(\s*\)|[^;])+/gm,u=e.trim().match(l);if(u){let c=u.length-1,d=u[c].trim();d.startsWith("return")||(u[c]=`return (${d});`),o=u.join(`;
`)}}else o=e.trim();let s=new Map,i=RegExp(`(?:${Mt})(.*?)(?:${Ft})`,"gm"),a=0;for(let l of o.matchAll(i)){let u=l[1],c=`__escaped${a++}`;s.set(c,u),o=o.replace(Mt+u+Ft,c)}o=o.replace(/\$\['([a-zA-Z_$\d][\w$]*)'\]/g,"$$$1").replace(/\$([a-zA-Z_\d]\w*(?:[.-]\w+)*)/g,(l,u)=>u.split(".").reduce((c,d)=>`${c}['${d}']`,"$")),o=o.replaceAll(/@([A-Za-z_$][\w$]*)\(/g,'__action("$1",evt,');for(let[l,u]of s)o=o.replace(l,u);try{let l=Function("el","$","__action","evt",...n,o);return(u,...c)=>{let d=(h,f,...p)=>{let g=Ze.bind(0,{plugin:{type:"action",name:h},element:{id:u.id,tag:u.tagName},expression:{fnContent:o,value:e}}),y=Xe[h];if(y)return y({el:u,evt:f,error:g,cleanups:r},...p);throw g("UndefinedAction")};try{return l(u,V,d,void 0,...c)}catch(h){throw console.error(h),Ze({element:{id:u.id,tag:u.tagName},expression:{fnContent:o,value:e},error:h.message},"ExecuteExpression")}}}catch(l){throw console.error(l),Ze({expression:{fnContent:o,value:e},error:l.message},"GenerateExpression")}};G({name:"peek",apply(e,t){ee();try{return t()}finally{te()}}});G({name:"setAll",apply(e,t,n){ee();let r=Z(n);_e(r,()=>t),Q(r),te()}});G({name:"toggleAll",apply(e,t){ee();let n=Z(t);_e(n,r=>!r),Q(n),te()}});var Dn=new WeakMap,tt=(e,t,n=!0)=>G({name:e,apply:async({el:r,evt:o,error:s,cleanups:i},a,{selector:l,headers:u,contentType:c="json",filterSignals:{include:d=/.*/,exclude:h=/(^|\.)_/}={},openWhenHidden:f=n,payload:p,requestCancellation:g="auto",retry:y="auto",retryInterval:m=1e3,retryScaler:v=2,retryMaxWaitMs:N=3e4,retryMaxCount:M=10}={})=>{let F=g instanceof AbortController?g:new AbortController;(g==="auto"||g==="cleanup")&&(Dn.get(r)?.abort(),Dn.set(r,F)),g==="cleanup"&&(i.get(`@${e}`)?.(),i.set(`@${e}`,async()=>{F.abort(),await Promise.resolve()}));let C=null;try{if(!a?.length)throw s("FetchNoUrlProvided",{action:G});let S={Accept:"text/event-stream, text/html, application/json","Datastar-Request":!0};c==="json"&&(S["Content-Type"]="application/json");let L=Object.assign({},S,u),E={method:t,headers:L,openWhenHidden:f,retry:y,retryInterval:m,retryScaler:v,retryMaxWaitMs:N,retryMaxCount:M,signal:F.signal,onopen:async b=>{b.status>=400&&Ne(Kr,r,{status:b.status.toString()})},onmessage:b=>{if(!b.event.startsWith("datastar"))return;let w=b.event,T={};for(let R of b.data.split(`
`)){let k=R.indexOf(" "),P=R.slice(0,k),q=R.slice(k+1);(T[P]||=[]).push(q)}let x=Object.fromEntries(Object.entries(T).map(([R,k])=>[R,k.join(`
`)]));Ne(w,r,x)},onerror:b=>{if(Vn(b))throw b("FetchExpectedTextEventStream",{url:a});b&&(console.error(b.message),Ne(zr,r,{message:b.message}))}},A=new URL(a,document.baseURI),$=new URLSearchParams(A.search);if(c==="json"){ee(),p=p!==void 0?p:Z({include:d,exclude:h}),te();let b=JSON.stringify(p);t==="GET"?$.set("datastar",b):E.body=b}else if(c==="form"){let b=l?document.querySelector(l):r.closest("form");if(!b)throw s("FetchFormNotFound",{action:G,selector:l});if(!b.noValidate&&!b.checkValidity()){b.reportValidity();return}let w=new FormData(b),T=r;if(r===b&&o instanceof SubmitEvent)T=o.submitter;else{let k=P=>P.preventDefault();b.addEventListener("submit",k),C=()=>{b.removeEventListener("submit",k)}}if(T instanceof HTMLButtonElement){let k=T.getAttribute("name");k&&w.append(k,T.value)}let x=b.getAttribute("enctype")==="multipart/form-data";x||(L["Content-Type"]="application/x-www-form-urlencoded");let R=new URLSearchParams(w);if(t==="GET")for(let[k,P]of R)$.append(k,P);else x?E.body=w:E.body=R}else throw s("FetchInvalidContentType",{action:G,contentType:c});Ne(Ut,r,{}),A.search=$.toString();try{await eo(A.toString(),r,E)}catch(b){if(!Vn(b))throw s("FetchFailed",{method:t,url:a,error:b.message})}}finally{Ne(Gt,r,{}),C?.(),i.delete(`@${e}`)}}});tt("get","GET",!1);tt("patch","PATCH");tt("post","POST");tt("put","PUT");tt("delete","DELETE");var Ut="started",Gt="finished",Kr="error",zr="retrying",Jr="retries-failed",Ne=(e,t,n)=>document.dispatchEvent(new CustomEvent(ge,{detail:{type:e,el:t,argsRaw:n}})),Vn=e=>`${e}`.includes("text/event-stream"),Zr=async(e,t)=>{let n=e.getReader(),r=await n.read();for(;!r.done;)t(r.value),r=await n.read()},Yr=e=>{let t,n,r,o=!1;return s=>{t?t=Xr(t,s):(t=s,n=0,r=-1);let i=t.length,a=0;for(;n<i;){o&&(t[n]===10&&(a=++n),o=!1);let l=-1;for(;n<i&&l===-1;++n)switch(t[n]){case 58:r===-1&&(r=n-a);break;case 13:o=!0;case 10:l=n;break}if(l===-1)break;e(t.subarray(a,l),r),a=n,r=-1}a===i?t=void 0:a&&(t=t.subarray(a),n-=a)}},Qr=(e,t,n)=>{let r=qn(),o=new TextDecoder;return(s,i)=>{if(!s.length)n?.(r),r=qn();else if(i>0){let a=o.decode(s.subarray(0,i)),l=i+(s[i+1]===32?2:1),u=o.decode(s.subarray(l));switch(a){case"data":r.data=r.data?`${r.data}
${u}`:u;break;case"event":r.event=u;break;case"id":e(r.id=u);break;case"retry":{let c=+u;Number.isNaN(c)||t(r.retry=c);break}}}}},Xr=(e,t)=>{let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n},qn=()=>({data:"",event:"",id:"",retry:void 0}),eo=(e,t,{signal:n,headers:r,onopen:o,onmessage:s,onclose:i,onerror:a,openWhenHidden:l,fetch:u,retry:c="auto",retryInterval:d=1e3,retryScaler:h=2,retryMaxWaitMs:f=3e4,retryMaxCount:p=10,responseOverrides:g,...y})=>new Promise((m,v)=>{let N={...r},M,F=()=>{M.abort(),document.hidden||b()};l||document.addEventListener("visibilitychange",F);let C,S=()=>{document.removeEventListener("visibilitychange",F),clearTimeout(C),M.abort()};n?.addEventListener("abort",()=>{S(),m()});let L=u||window.fetch,E=o||(()=>{}),A=0,$=d,b=async()=>{M=new AbortController;let w=M.signal;try{let T=await L(e,{...y,headers:N,signal:w});await E(T);let x=async(K,J,me,le,...Oe)=>{let j={[me]:await J.text()};for(let ke of Oe){let Pe=J.headers.get(`datastar-${ae(ke)}`);if(le){let $e=le[ke];$e&&(Pe=typeof $e=="string"?$e:JSON.stringify($e))}Pe&&(j[ke]=Pe)}Ne(K,t,j),S(),m()},R=T.status,k=R===204,P=R>=300&&R<400,q=R>=400&&R<600;if(R!==200){if(i?.(),c!=="never"&&!k&&!P&&(c==="always"||c==="error"&&q)){clearTimeout(C),C=setTimeout(b,d);return}S(),m();return}A=0,d=$;let oe=T.headers.get("Content-Type");if(oe?.includes("text/html"))return await x("datastar-patch-elements",T,"elements",g,"selector","mode","namespace","useViewTransition");if(oe?.includes("application/json"))return await x("datastar-patch-signals",T,"signals",g,"onlyIfMissing");if(oe?.includes("text/javascript")){let K=document.createElement("script"),J=T.headers.get("datastar-script-attributes");if(J)for(let[me,le]of Object.entries(JSON.parse(J)))K.setAttribute(me,le);K.textContent=await T.text(),document.head.appendChild(K),S();return}if(await Zr(T.body,Yr(Qr(K=>{K?N["last-event-id"]=K:delete N["last-event-id"]},K=>{$=d=K},s))),i?.(),c==="always"&&!P){clearTimeout(C),C=setTimeout(b,d);return}S(),m()}catch(T){if(!w.aborted)try{let x=a?.(T)||d;clearTimeout(C),C=setTimeout(b,x),d=Math.min(d*h,f),++A>=p?(Ne(Jr,t,{}),S(),v("Max retries reached.")):console.error(`Datastar failed to reach ${e.toString()} retrying in ${x}ms.`)}catch(x){S(),v(x)}}};b()});_({name:"attr",requirement:{value:"must"},returnsValue:!0,apply({el:e,key:t,rx:n}){let r=(a,l)=>{l===""||l===!0?e.setAttribute(a,""):l===!1||l==null?e.removeAttribute(a):typeof l=="string"?e.setAttribute(a,l):e.setAttribute(a,JSON.stringify(l))},o=t?()=>{s.disconnect();let a=n();r(t,a),s.observe(e,{attributeFilter:[t]})}:()=>{s.disconnect();let a=n(),l=Object.keys(a);for(let u of l)r(u,a[u]);s.observe(e,{attributeFilter:l})},s=new MutationObserver(o),i=I(o);return()=>{s.disconnect(),i()}}});var to=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,jn=Symbol("empty"),Bn=ve("bind");_({name:"bind",requirement:"exclusive",apply({el:e,key:t,mods:n,value:r,error:o}){let s=t!=null?X(t,n):r,i=(f,p)=>p==="number"?+f.value:f.value,a=f=>{e.value=`${f}`};if(e instanceof HTMLInputElement)switch(e.type){case"range":case"number":i=(f,p)=>p==="string"?f.value:+f.value;break;case"checkbox":i=(f,p)=>f.value!=="on"?p==="boolean"?f.checked:f.checked?f.value:"":p==="string"?f.checked?f.value:"":f.checked,a=f=>{e.checked=typeof f=="string"?f===e.value:f};break;case"radio":e.getAttribute("name")?.length||e.setAttribute("name",s),i=(f,p)=>f.checked?p==="number"?+f.value:f.value:jn,a=f=>{e.checked=f===(typeof f=="number"?+e.value:e.value)};break;case"file":{let f=()=>{let p=[...e.files||[]],g=[];Promise.all(p.map(y=>new Promise(m=>{let v=new FileReader;v.onload=()=>{if(typeof v.result!="string")throw o("InvalidFileResultType",{resultType:typeof v.result});let N=v.result.match(to);if(!N?.groups)throw o("InvalidDataUri",{result:v.result});g.push({name:y.name,contents:N.groups.contents,mime:N.groups.mime})},v.onloadend=()=>m(),v.readAsDataURL(y)}))).then(()=>{H([[s,g]])})};return e.addEventListener("change",f),e.addEventListener("input",f),()=>{e.removeEventListener("change",f),e.removeEventListener("input",f)}}}else if(e instanceof HTMLSelectElement){if(e.multiple){let f=new Map;i=p=>[...p.selectedOptions].map(g=>{let y=f.get(g.value);return y==="string"||y==null?g.value:+g.value}),a=p=>{for(let g of e.options)p.includes(g.value)?(f.set(g.value,"string"),g.selected=!0):p.includes(+g.value)?(f.set(g.value,"number"),g.selected=!0):g.selected=!1}}}else e instanceof HTMLTextAreaElement||(i=f=>"value"in f?f.value:f.getAttribute("value"),a=f=>{"value"in e?e.value=f:e.setAttribute("value",f)});let l=He(s),u=typeof l,c=s;if(Array.isArray(l)&&!(e instanceof HTMLSelectElement&&e.multiple)){let f=t||r,p=document.querySelectorAll(`[${Bn}\\:${CSS.escape(f)}],[${Bn}="${CSS.escape(f)}"]`),g=[],y=0;for(let m of p){if(g.push([`${c}.${y}`,i(m,"none")]),e===m)break;y++}H(g,{ifMissing:!0}),c=`${c}.${y}`}else H([[c,i(e,u)]],{ifMissing:!0});let d=()=>{let f=He(c);if(f!=null){let p=i(e,typeof f);p!==jn&&H([[c,p]])}};e.addEventListener("input",d),e.addEventListener("change",d);let h=I(()=>{a(He(c))});return()=>{h(),e.removeEventListener("input",d),e.removeEventListener("change",d)}}});_({name:"class",requirement:{value:"must"},returnsValue:!0,apply({key:e,el:t,mods:n,rx:r}){e&&=X(e,n,"kebab");let o,s=()=>{i.disconnect(),o=e?{[e]:r()}:r();for(let l in o){let u=l.split(/\s+/).filter(c=>c.length>0);if(o[l])for(let c of u)t.classList.contains(c)||t.classList.add(c);else for(let c of u)t.classList.contains(c)&&t.classList.remove(c)}i.observe(t,{attributeFilter:["class"]})},i=new MutationObserver(s),a=I(s);return()=>{i.disconnect(),a();for(let l in o){let u=l.split(/\s+/).filter(c=>c.length>0);for(let c of u)t.classList.remove(c)}}}});_({name:"computed",requirement:{value:"must"},returnsValue:!0,apply({key:e,mods:t,rx:n,error:r}){if(e)H([[X(e,t),Ie(n)]]);else{let o=Object.assign({},n());_e(o,s=>{if(typeof s=="function")return Ie(s);throw r("ComputedExpectedFunction")}),Q(o)}}});_({name:"effect",requirement:{key:"denied",value:"must"},apply:({rx:e})=>I(e)});_({name:"indicator",requirement:"exclusive",apply({el:e,key:t,mods:n,value:r}){let o=t!=null?X(t,n):r;H([[o,!1]]);let s=i=>{let{type:a,el:l}=i.detail;if(l===e)switch(a){case Ut:H([[o,!0]]);break;case Gt:H([[o,!1]]);break}};return document.addEventListener(ge,s),()=>{H([[o,!1]]),document.removeEventListener(ge,s)}}});var ce=e=>{if(!e||e.size<=0)return 0;for(let t of e){if(t.endsWith("ms"))return+t.replace("ms","");if(t.endsWith("s"))return+t.replace("s","")*1e3;try{return Number.parseFloat(t)}catch{}}return 0},xe=(e,t,n=!1)=>e?e.has(t.toLowerCase()):n,Wn=(e,t="")=>{if(e&&e.size>0)for(let n of e)return n;return t};var Kt=(e,t)=>(...n)=>{setTimeout(()=>{e(...n)},t)},Un=(e,t,n=!0,r=!1,o=!1)=>{let s=null,i=0;return(...a)=>{n&&!i?(e(...a),s=null):s=a,(!i||o)&&(i&&clearTimeout(i),i=setTimeout(()=>{r&&s!==null&&e(...s),s=null,i=0},t))}},de=(e,t)=>{let n=t.get("delay");if(n){let s=ce(n);e=Kt(e,s)}let r=t.get("debounce");if(r){let s=ce(r),i=xe(r,"leading",!1),a=!xe(r,"notrailing",!1);e=Un(e,s,i,a,!0)}let o=t.get("throttle");if(o){let s=ce(o),i=!xe(o,"noleading",!1),a=xe(o,"trailing",!1);e=Un(e,s,i,a)}return e};var nt=!!document.startViewTransition,ne=(e,t)=>{if(t.has("viewtransition")&&nt){let n=e;e=(...r)=>document.startViewTransition(()=>n(...r))}return e};_({name:"init",requirement:{key:"denied",value:"must"},apply({rx:e,mods:t}){let n=()=>{W(),e(),U()};n=ne(n,t);let r=0,o=t.get("delay");o&&(r=ce(o),r>0&&(n=Kt(n,r))),n()}});_({name:"json-signals",requirement:{key:"denied"},apply({el:e,value:t,mods:n}){let r=n.has("terse")?0:2,o={};t&&(o=fe(t));let s=()=>{i.disconnect(),e.textContent=JSON.stringify(Z(o),null,r),i.observe(e,{childList:!0,characterData:!0,subtree:!0})},i=new MutationObserver(s),a=I(s);return()=>{i.disconnect(),a()}}});_({name:"on",requirement:"must",argNames:["evt"],apply({el:e,key:t,mods:n,rx:r}){let o=e;n.has("window")&&(o=window);let s=l=>{l&&(n.has("prevent")&&l.preventDefault(),n.has("stop")&&l.stopPropagation()),W(),r(l),U()};s=ne(s,n),s=de(s,n);let i={capture:n.has("capture"),passive:n.has("passive"),once:n.has("once")};if(n.has("outside")){o=document;let l=s;s=u=>{e.contains(u?.target)||l(u)}}let a=X(t,n,"kebab");if((a===ge||a===ue)&&(o=document),e instanceof HTMLFormElement&&a==="submit"){let l=s;s=u=>{u?.preventDefault(),l(u)}}return o.addEventListener(a,s,i),()=>{o.removeEventListener(a,s)}}});var St=(e,t,n)=>Math.max(t,Math.min(n,e)),Le=(e,t,n,r=!0)=>{let o=e+(t-e)*n;return r?St(o,e,t):o},Me=(e,t,n,r=!0)=>{if(n<e)return 0;if(n>t)return 1;let o=(n-e)/(t-e);return r?St(o,e,t):o},Gn=(e,t,n,r,o,s=!0,i=!1)=>{let a=Me(t,n,e,s),l=Le(r,o,a,s);return i?Math.round(l):l};var zt=new WeakSet;_({name:"on-intersect",requirement:{key:"denied",value:"must"},apply({el:e,mods:t,rx:n}){let r=()=>{W(),n(),U()};r=ne(r,t),r=de(r,t);let o={threshold:0};t.has("full")?o.threshold=1:t.has("half")?o.threshold=.5:t.get("threshold")&&(o.threshold=St(Number(t.get("threshold")),0,100)/100);let s=t.has("exit"),i=new IntersectionObserver(a=>{for(let l of a)l.isIntersecting!==s&&(r(),i&&zt.has(e)&&i.disconnect())},o);return i.observe(e),t.has("once")&&zt.add(e),()=>{t.has("once")||zt.delete(e),i&&(i.disconnect(),i=null)}}});_({name:"on-interval",requirement:{key:"denied",value:"must"},apply({mods:e,rx:t}){let n=()=>{W(),t(),U()};n=ne(n,e);let r=1e3,o=e.get("duration");o&&(r=ce(o),xe(o,"leading",!1)&&n());let s=setInterval(n,r);return()=>{clearInterval(s)}}});_({name:"on-signal-patch",requirement:{value:"must"},argNames:["patch"],returnsValue:!0,apply({el:e,key:t,mods:n,rx:r,error:o}){if(t&&t!=="filter")throw o("KeyNotAllowed");let s=ve(`${this.name}-filter`),i=e.getAttribute(s),a={};i&&(a=fe(i));let l=!1,u=de(c=>{if(l)return;let d=Z(a,c.detail);if(!lt(d)){l=!0,W();try{r(d)}finally{U(),l=!1}}},n);return document.addEventListener(ue,u),()=>{document.removeEventListener(ue,u)}}});_({name:"ref",requirement:"exclusive",apply({el:e,key:t,mods:n,value:r}){let o=t!=null?X(t,n):r;H([[o,e]])}});var Kn="none",zn="display";_({name:"show",requirement:{key:"denied",value:"must"},returnsValue:!0,apply({el:e,rx:t}){let n=()=>{r.disconnect(),t()?e.style.display===Kn&&e.style.removeProperty(zn):e.style.setProperty(zn,Kn),r.observe(e,{attributeFilter:["style"]})},r=new MutationObserver(n),o=I(n);return()=>{r.disconnect(),o()}}});_({name:"signals",returnsValue:!0,apply({key:e,mods:t,rx:n}){let r=t.has("ifmissing");if(e){e=X(e,t);let o=n?.();H([[e,o]],{ifMissing:r})}else{let o=Object.assign({},n?.());Q(o,{ifMissing:r})}}});_({name:"style",requirement:{value:"must"},returnsValue:!0,apply({key:e,el:t,rx:n}){let{style:r}=t,o=new Map,s=(u,c)=>{let d=o.get(u);!c&&c!==0?d!==void 0&&(d?r.setProperty(u,d):r.removeProperty(u)):(d===void 0&&o.set(u,r.getPropertyValue(u)),r.setProperty(u,String(c)))},i=()=>{if(a.disconnect(),e)s(e,n());else{let u=n();for(let[c,d]of o)c in u||(d?r.setProperty(c,d):r.removeProperty(c));for(let c in u)s(ae(c),u[c])}a.observe(t,{attributeFilter:["style"]})},a=new MutationObserver(i),l=I(i);return()=>{a.disconnect(),l();for(let[u,c]of o)c?r.setProperty(u,c):r.removeProperty(u)}}});_({name:"text",requirement:{key:"denied",value:"must"},returnsValue:!0,apply({el:e,rx:t}){let n=()=>{r.disconnect(),e.textContent=`${t()}`,r.observe(e,{childList:!0,characterData:!0,subtree:!0})},r=new MutationObserver(n),o=I(n);return()=>{r.disconnect(),o()}}});var Jn=(e,t)=>e.includes(t),no=["remove","outer","inner","replace","prepend","append","before","after"],ro=["html","svg","mathml"];et({name:"datastar-patch-elements",apply(e,t){let n=typeof t.selector=="string"?t.selector:"",r=typeof t.mode=="string"?t.mode:"outer",o=typeof t.namespace=="string"?t.namespace:"html",s=typeof t.useViewTransition=="string"?t.useViewTransition:"",i=t.elements;if(!Jn(no,r))throw e.error("PatchElementsInvalidMode",{mode:r});if(!n&&r!=="outer"&&r!=="replace")throw e.error("PatchElementsExpectedSelector");if(!Jn(ro,o))throw e.error("PatchElementsInvalidNamespace",{namespace:o});let a={selector:n,mode:r,namespace:o,useViewTransition:s.trim()==="true",elements:i};nt&&a.useViewTransition?document.startViewTransition(()=>Zn(e,a)):Zn(e,a)}});var Zn=({error:e},{selector:t,mode:n,namespace:r,elements:o})=>{let s=document.createDocumentFragment(),i=typeof o!="string"&&!!o;if(typeof o=="string"){let a=o.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,""),l=/<\/html>/.test(a),u=/<\/head>/.test(a),c=/<\/body>/.test(a),d=r==="svg"?"svg":r==="mathml"?"math":"",h=d?`<${d}>${o}</${d}>`:o,f=new DOMParser().parseFromString(l||u||c?o:`<body><template>${h}</template></body>`,"text/html");if(l)s.appendChild(f.documentElement);else if(u&&c)s.appendChild(f.head),s.appendChild(f.body);else if(u)s.appendChild(f.head);else if(c)s.appendChild(f.body);else if(d){let p=f.querySelector("template").content.querySelector(d);for(let g of p.childNodes)s.appendChild(g)}else s=f.querySelector("template").content}else o&&(o instanceof DocumentFragment?s=o:o instanceof Element&&s.appendChild(o));if(!t&&(n==="outer"||n==="replace")){let a=Array.from(s.children);for(let l of a){let u;if(l instanceof HTMLHtmlElement)u=document.documentElement;else if(l instanceof HTMLBodyElement)u=document.body;else if(l instanceof HTMLHeadElement)u=document.head;else if(u=document.getElementById(l.id),!u){console.warn(e("PatchElementsNoTargetsFound"),{element:{id:l.id}});continue}Qn(n,l,[u],i)}}else{let a=document.querySelectorAll(t);if(!a.length){console.warn(e("PatchElementsNoTargetsFound"),{selector:t});return}let l=i&&n!=="remove"?[a[0]]:a;Qn(n,s,l,i)}},Zt=new WeakSet;for(let e of document.querySelectorAll("script"))Zt.add(e);var tr=e=>{let t=e instanceof HTMLScriptElement?[e]:e.querySelectorAll("script");for(let n of t)if(!Zt.has(n)){let r=document.createElement("script");for(let{name:o,value:s}of n.attributes)r.setAttribute(o,s);r.text=n.text,n.replaceWith(r),Zt.add(r)}},Yn=(e,t,n,r)=>{let o=!1;for(let s of e){if(r&&o)break;let i=r?t:t.cloneNode(!0);tr(i),s[n](i),o=!0}},Qn=(e,t,n,r)=>{switch(e){case"remove":for(let o of n)o.remove();break;case"outer":case"inner":{let o=!1;for(let s of n){if(r&&o)break;let i=r?t:t.cloneNode(!0);so(s,i,e),tr(s);let a=s.closest("[data-scope-children]");a&&a.dispatchEvent(new CustomEvent("datastar:scope-children",{bubbles:!1})),o=!0}}break;case"replace":Yn(n,t,"replaceWith",r);break;case"prepend":case"append":case"before":case"after":Yn(n,t,e,r)}},re=new Map,je=new Set,qe=new Map,rt=new Set,Be=document.createElement("div");Be.hidden=!0;var ot=ve("ignore-morph"),oo=`[${ot}]`,so=(e,t,n="outer")=>{if(ye(e)&&ye(t)&&e.hasAttribute(ot)&&t.hasAttribute(ot)||e.parentElement?.closest(oo))return;let r=document.createElement("div");r.append(t),document.body.insertAdjacentElement("afterend",Be);let o=e.querySelectorAll("[id]");for(let{id:a,tagName:l}of o)qe.has(a)?rt.add(a):qe.set(a,l);e instanceof Element&&e.id&&(qe.has(e.id)?rt.add(e.id):qe.set(e.id,e.tagName)),je.clear();let s=r.querySelectorAll("[id]");for(let{id:a,tagName:l}of s)je.has(a)?rt.add(a):qe.get(a)===l&&je.add(a);for(let a of rt)je.delete(a);qe.clear(),rt.clear(),re.clear();let i=n==="outer"?e.parentElement:e;er(i,o),er(r,s),nr(i,r,n==="outer"?e:null,e.nextSibling),Be.remove()},nr=(e,t,n=null,r=null)=>{e instanceof HTMLTemplateElement&&t instanceof HTMLTemplateElement&&(e=e.content,t=t.content),n??=e.firstChild;for(let o of t.childNodes){if(n&&n!==r){let s=io(o,n,r);if(s){if(s!==n){let i=n;for(;i&&i!==s;){let a=i;i=i.nextSibling,Yt(a)}}Jt(s,o),n=s.nextSibling;continue}}if(o instanceof Element&&je.has(o.id)){let s=document.getElementById(o.id),i=s;for(;i=i.parentNode;){let a=re.get(i);a&&(a.delete(o.id),a.size||re.delete(i))}rr(e,s,n),Jt(s,o),n=s.nextSibling;continue}if(re.has(o)){let s=o.namespaceURI,i=o.tagName,a=s&&s!=="http://www.w3.org/1999/xhtml"?document.createElementNS(s,i):document.createElement(i);e.insertBefore(a,n),Jt(a,o),n=a.nextSibling}else{let s=document.importNode(o,!0);e.insertBefore(s,n),n=s.nextSibling}}for(;n&&n!==r;){let o=n;n=n.nextSibling,Yt(o)}},io=(e,t,n)=>{let r=null,o=e.nextSibling,s=0,i=0,a=re.get(e)?.size||0,l=t;for(;l&&l!==n;){if(Xn(l,e)){let u=!1,c=re.get(l),d=re.get(e);if(d&&c){for(let h of c)if(d.has(h)){u=!0;break}}if(u)return l;if(!r&&!re.has(l)){if(!a)return l;r=l}}if(i+=re.get(l)?.size||0,i>a)break;r===null&&o&&Xn(l,o)&&(s++,o=o.nextSibling,s>=2&&(r=void 0)),l=l.nextSibling}return r||null},Xn=(e,t)=>e.nodeType===t.nodeType&&e.tagName===t.tagName&&(!e.id||e.id===t.id),Yt=e=>{re.has(e)?rr(Be,e,null):e.parentNode?.removeChild(e)},rr=Yt.call.bind(Be.moveBefore??Be.insertBefore),ao=ve("preserve-attr"),Jt=(e,t)=>{let n=t.nodeType;if(n===1){let r=e,o=t,s=r.hasAttribute("data-scope-children");if(r.hasAttribute(ot)&&o.hasAttribute(ot))return e;r instanceof HTMLInputElement&&o instanceof HTMLInputElement&&o.type!=="file"?o.getAttribute("value")!==r.getAttribute("value")&&(r.value=o.getAttribute("value")??""):r instanceof HTMLTextAreaElement&&o instanceof HTMLTextAreaElement&&(o.value!==r.value&&(r.value=o.value),r.firstChild&&r.firstChild.nodeValue!==o.value&&(r.firstChild.nodeValue=o.value));let i=(t.getAttribute(ao)??"").split(" ");for(let{name:a,value:l}of o.attributes)r.getAttribute(a)!==l&&!i.includes(a)&&r.setAttribute(a,l);for(let a=r.attributes.length-1;a>=0;a--){let{name:l}=r.attributes[a];!o.hasAttribute(l)&&!i.includes(l)&&r.removeAttribute(l)}s&&!r.hasAttribute("data-scope-children")&&r.setAttribute("data-scope-children",""),r instanceof HTMLTemplateElement&&o instanceof HTMLTemplateElement?r.innerHTML=o.innerHTML:r.isEqualNode(o)||nr(r,o),s&&r.dispatchEvent(new CustomEvent("datastar:scope-children",{bubbles:!1}))}return(n===8||n===3)&&e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue),e},er=(e,t)=>{for(let n of t)if(je.has(n.id)){let r=n;for(;r&&r!==e;){let o=re.get(r);o||(o=new Set,re.set(r,o)),o.add(n.id),r=r.parentElement}}};et({name:"datastar-patch-signals",apply({error:e},{signals:t,onlyIfMissing:n}){if(typeof t!="string")throw e("PatchSignalsExpectedSignals");let r=typeof n=="string"&&n.trim()==="true";Q(fe(t),{ifMissing:r})}});G({name:"clipboard",apply:({error:e},t,n=!1)=>{if(!navigator.clipboard)throw e("ClipboardNotAvailable");navigator.clipboard.writeText(n?atob(t):t)}});G({name:"fit",apply:(e,t,n,r,o,s,i=!1,a=!1)=>{let l=Me(n,r,t,i),u=Le(o,s,l,i);return a&&(u=Math.round(u)),u}});G({name:"intl",apply({error:e},t,n,r,o){let s=o||navigator.language||"en-US";switch(t){case"datetime":{let i=n instanceof Date?n:new Date(n);if(Number.isNaN(i.getTime()))throw e("IntlInvalidDate",{value:n});return new Intl.DateTimeFormat(s,r).format(i)}case"number":return new Intl.NumberFormat(s,r).format(typeof n=="number"?n:parseFloat(n));case"pluralRules":return new Intl.PluralRules(s,r).select(Number(n));case"relativeTime":{let i=r.unit?.[0]??"day";return new Intl.RelativeTimeFormat(s,r).format(Number(n),i)}case"list":return new Intl.ListFormat(s,r).format(Array.isArray(n)?n.map(String):[String(n)]);case"displayNames":{let i=r.type||"language",a={...r,type:i};return new Intl.DisplayNames(s,a).of(String(n))}default:throw e("IntlTypeNotSupported",{type:t})}}});_({name:"animate",requirement:{value:"must"},returnsValue:!0,apply({el:e,key:t,mods:n,rx:r}){let o=1e3,s=n.get("duration");s&&(o=ce(s));let i=Wn(n.get("ease"),"linear"),a=Fe[i];if(!a)throw new Error(`Invalid easing function: ${i}. Available easing functions: ${Object.keys(Fe).join(", ")}`);let l=0,u=n.get("delay");u&&(l=ce(u));let c=-1,d=()=>{c!==-1&&(cancelAnimationFrame(c),c=-1)},h=(f,p)=>{let g=or(p),y=e.getAttribute(f)||`0${g.suffix}`;if(y===p){e.setAttribute(f,p);return}let m=or(y);if(m.suffix!==g.suffix)throw new Error(`Cannot animate attribute "${f}" from "${y}" to "${p}" because they have different suffixes: "${m.suffix}" and "${g.suffix}".`);d();let v=0,N=0,M=()=>{let F=performance.now(),C=F>=N,S=0;if(C){S=g.value;let L=n.has("loop"),E=n.has("pingpong");if(L||E){if(v=F,N=F+o,E){let A=m.value;m.value=g.value,g.value=A}S=m.value,C=!1}}else{let L=Me(v,N,F),E=a(L);S=Le(m.value,g.value,E)}e.setAttribute(f,`${S}${g.suffix}`),C?d():c=requestAnimationFrame(M)};setTimeout(()=>{v=performance.now(),N=v+o,c=requestAnimationFrame(M)},l)};return t?I(()=>{let f=r();h(t,`${f}`)}):I(()=>{let f=r();for(let[p,g]of Object.entries(f))h(p,g)})}});var or=e=>{let t=e.match(/^(-?\d*\.?\d+)([a-z%]*)$/i);if(t)return{value:Number.parseFloat(t[1]),suffix:t[2]||""};throw new Error(`Invalid suffixed value: ${e}`)},{sqrt:Et,sin:st,cos:sr,PI:We}=Math,Fe={linear:e=>e,quadratic:e=>e*(-(e*e)*e+4*e*e-6*e+4),cubic:e=>e*(4*e*e-9*e+6),elastic:e=>e*(33*e*e*e*e-106*e*e*e+126*e*e-67*e+15),inquad:e=>e*e,outquad:e=>e*(2-e),inoutquad:e=>e<.5?2*e*e:-1+(4-2*e)*e,incubic:e=>e*e*e,outcubic:e=>--e*e*e+1,inoutcubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,inquart:e=>e*e*e*e,outquart:e=>1- --e*e*e*e,inoutquart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,inquint:e=>e*e*e*e*e,outquint:e=>1+--e*e*e*e*e,inoutquint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,insine:e=>-sr(e*(We/2))+1,outsine:e=>st(e*(We/2)),inoutsine:e=>-(sr(We*e)-1)/2,inexpo:e=>2**(10*(e-1)),outexpo:e=>-(2**(-10*e))+1,inoutexpo:e=>(e/=.5,e<1?2**(10*(e-1))/2:(e--,(-(2**(-10*e))+2)/2)),incirc:e=>-Et(1-e*e)+1,outcirc:e=>Et(1-(e=e-1)*e),inoutcirc:e=>(e/=.5,e<1?-(Et(1-e*e)-1)/2:(e-=2,(Et(1-e*e)+1)/2)),inelastic:e=>{let t=2*We/3;return e===0?0:e===1?1:-(2**(10*(e-1)))*st((e-1.1)*t)},outelastic:e=>{let t=2*We/3;return e===0?0:e===1?1:2**(-10*e)*st((e-.1)*t)+1},inoutelastic:e=>{let t=2*We/4.5;return e===0?0:e===1?1:e<.5?-(2**(20*e-10))*st((20*e-11.125)*t)/2:2**(-20*e+10)*st((20*e-11.125)*t)/2+1},inback:e=>e*e*((1.70158+1)*e-1.70158),outback:e=>(e=e-1)*e*((1.70158+1)*e+1.70158)+1,inoutback:e=>{let t=2.5949095;return e/=.5,e<1?e*e*((t+1)*e-t)/2:(e-=2,(e*e*((t+1)*e+t)+2)/2)},inbounce:e=>1-Fe.outBounce(1-e),outbounce:e=>e<1/2.75?7.5625*e*e:e<2/2.75?(e-=1.5/2.75,7.5625*e*e+.75):e<2.5/2.75?(e-=2.25/2.75,7.5625*e*e+.9375):(e-=2.625/2.75,7.5625*e*e+.984375),inoutbounce:e=>e<.5?Fe.inBounce(e*2)/2:Fe.outBounce(e*2-1)/2+.5,ingolden:e=>e**1.834057,outgolden:e=>1-(1-e)**1.834057,inoutgolden:e=>e<.5?Fe.inGolden(e*2)/2:Fe.outGolden(e*2-1)/2+.5};_({name:"custom-validity",requirement:{key:"denied",value:"must"},returnsValue:!0,apply({el:e,rx:t,error:n}){if(!(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement))throw n("CustomValidityInvalidElement",{element:{tag:e.tagName}});return I(()=>{let r=t();if(typeof r!="string")throw n("CustomValidityInvalidExpression",{expression:{value:r}});e.setCustomValidity(r)})}});_({name:"on-raf",requirement:{key:"denied",value:"must"},apply({mods:e,rx:t}){let n=()=>{W(),t(),U()};n=ne(n,e),n=de(n,e);let r,o=()=>{n(),r=requestAnimationFrame(o)};return r=requestAnimationFrame(o),()=>{r&&cancelAnimationFrame(r)}}});_({name:"on-resize",requirement:{key:"denied",value:"must"},apply({el:e,mods:t,rx:n}){let r=()=>{W(),n(),U()};r=ne(r,t),r=de(r,t);let o=new ResizeObserver(()=>{r()});return o.observe(e),()=>{o&&(o.disconnect(),o=null)}}});_({name:"persist",returnsValue:!0,apply({key:e,mods:t,rx:n}){let r=e||"datastar",o=t.has("session")?sessionStorage:localStorage,s=o[r];if(s)try{let i=JSON.parse(s);Q(i)}catch(i){console.error("Failed to parse persisted data:",i)}return I(()=>{let i=Z(n?.()),a=JSON.stringify(i);o[r]=a})}});_({name:"query-string",requirement:{key:"denied"},returnsValue:!0,apply({mods:e,rx:t}){let n=e.has("history"),r=!1,o=()=>new URLSearchParams(window.location.search),s=()=>Z(t?.()),i=()=>{let u=o(),c=s(),d=[],h=(p,g="")=>{let y=[];for(let m in p){let v=g?`${g}.${m}`:m,N=p[m];N&&typeof N=="object"&&!(N instanceof HTMLElement)?y.push(...h(N,v)):y.push(v)}return y},f=h(c);for(let p of f){let g=u.get(p);if(g!==null){let y=g;g==="true"?y=!0:g==="false"?y=!1:!Number.isNaN(+g)&&g!==""&&(y=+g),d.push([p,y])}}lt(d)||H(d)};i();let a=()=>{r=!0,i(),r=!1};n&&window.addEventListener("popstate",a);let l=I(()=>{if(r)return;let u=new URLSearchParams,c=o().toString(),d=(f,p)=>{for(let g in f){let y=f[g],m=p.length?`${p}.${g}`:g;y instanceof HTMLElement||(typeof y=="object"?d(y,m):(!e.has("filter")||y)&&u.set(m,`${y}`))}};d(s(),"");let h=u.toString();if(h!==c){let f=h?`?${h}`:window.location.pathname;n?window.history.pushState({},"",f):window.history.replaceState({},"",f)}});return()=>{n&&window.removeEventListener("popstate",a),l()}}});_({name:"replace-url",requirement:{key:"denied",value:"must"},returnsValue:!0,apply({rx:e}){return I(()=>{let t=e(),n=window.location.href,r=new URL(t,n).toString();window.history.replaceState({},"",r)})}});var Qt="smooth",ir="instant",ar="auto",co="hstart",lo="hcenter",uo="hend",fo="hnearest",po="vstart",mo="vcenter",go="vend",ho="vnearest",At="center",cr="start",lr="end",ur="nearest",yo="focus";_({name:"scroll-into-view",requirement:"denied",apply({el:e,mods:t}){let n={behavior:Qt,block:At,inline:At};t.has(Qt)&&(n.behavior=Qt),t.has(ir)&&(n.behavior=ir),t.has(ar)&&(n.behavior=ar),t.has(co)&&(n.inline=cr),t.has(lo)&&(n.inline=At),t.has(uo)&&(n.inline=lr),t.has(fo)&&(n.inline=ur),t.has(po)&&(n.block=cr),t.has(mo)&&(n.block=At),t.has(go)&&(n.block=lr),t.has(ho)&&(n.block=ur),e.tabIndex||e.setAttribute("tabindex","0"),e.scrollIntoView(n),t.has(yo)&&e.focus()}});_({name:"view-transition",requirement:{key:"denied",value:"must"},returnsValue:!0,apply({el:e,rx:t}){if(!nt){console.warn("Browser does not support view transitions");return}return I(()=>{let n=t();n&&(e.style.viewTransitionName=n)})}});var fr={name:"string",decode:e=>String(e??""),encode:e=>e,validate:()=>!0},bo={name:"int",decode:e=>Number.parseInt(String(e??""),10)||0,encode:e=>String(Math.floor(e)),validate:e=>Number.isInteger(e)},vo={name:"float",decode:e=>Number.parseFloat(String(e??""))||0,encode:e=>String(e),validate:e=>typeof e=="number"&&!Number.isNaN(e)},So={name:"boolean",decode:e=>e==="true"||e===!0||e===1||e==="1",encode:e=>e?"true":"false",validate:e=>typeof e=="boolean"},Eo={name:"date",decode:e=>{let t=new Date;if(e instanceof Date)return Number.isNaN(e.getTime())?t:e;if(typeof e=="number"){let n=new Date(e);return Number.isNaN(n.getTime())?t:n}if(typeof e=="string"){let n=e.trim();if(n.length===0)return t;let r=Date.parse(n);return Number.isNaN(r)?t:new Date(r)}return t},encode:e=>{let t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?new Date().toISOString():t.toISOString()},validate:e=>e instanceof Date&&!Number.isNaN(e.getTime())},Ao={name:"required",decode:e=>e,encode:e=>e,validate:e=>e!=null&&e!==""&&e!==!1},To={name:"trim",decode:e=>String(e).trim(),encode:e=>e,validate:()=>!0},wo={name:"upper",decode:e=>String(e).toUpperCase(),encode:e=>e.toLowerCase(),validate:()=>!0},Co={name:"lower",decode:e=>String(e).toLowerCase(),encode:e=>e.toUpperCase(),validate:()=>!0};function Ro(e=0){return{name:"min",decode:t=>Math.max(Number(t),e),encode:t=>t,validate:t=>t>=e}}function ko(e=Number.POSITIVE_INFINITY){return{name:"max",decode:t=>Math.min(Number(t),e),encode:t=>t,validate:t=>t<=e}}function $o(e=0,t=Number.POSITIVE_INFINITY){return{name:"clamp",decode:n=>Math.max(e,Math.min(Number(n),t)),encode:n=>n,validate:n=>n>=e&&n<=t}}function Xt(e=0,t="round"){return{name:"round",decode:n=>{let r=10**e,o=Number(n)*r;return t==="floor"?Math.floor(o)/r:t==="ceil"?Math.ceil(o)/r:Math.round(o)/r},encode:n=>n,validate:()=>!0}}function _o(...e){return{name:"oneOf",decode:t=>e.includes(t)?t:e[0],encode:t=>t,validate:t=>e.includes(t)}}var No={name:"kebab",decode:e=>ae(String(e??"")),encode:e=>e,validate:()=>!0},xo={name:"camel",decode:e=>De(String(e??"")),encode:e=>e,validate:()=>!0},Lo={name:"snake",decode:e=>be(String(e??"")),encode:e=>e,validate:()=>!0},Mo={name:"pascal",decode:e=>Nn(String(e??"")),encode:e=>e,validate:()=>!0},Fo={name:"title",decode:e=>xn(String(e??"")),encode:e=>e,validate:()=>!0};function Oo(e=0){return{name:"minLength",decode:t=>String(t),encode:t=>t,validate:t=>String(t).length>=e}}function Po(e=Number.POSITIVE_INFINITY){return{name:"maxLength",decode:t=>String(t).slice(0,e),encode:t=>t,validate:t=>String(t).length<=e}}function Io(e=0){return{name:"length",decode:t=>String(t),encode:t=>t,validate:t=>String(t).length===e}}function Ho(e,t){let n=new RegExp(e,t);return{name:"regex",decode:r=>String(r),encode:r=>r,validate:r=>n.test(String(r))}}function Do(e){return{name:"startsWith",decode:t=>{let n=String(t??"");return n.startsWith(e)?n:e+n},encode:t=>t,validate:t=>String(t).startsWith(e)}}function Vo(e){return{name:"endsWith",decode:t=>{let n=String(t??"");return n.endsWith(e)?n:n+e},encode:t=>t,validate:t=>String(t).endsWith(e)}}function qo(e){return{name:"includes",decode:t=>String(t??""),encode:t=>t,validate:t=>String(t).includes(e)}}var jo={name:"json",decode:e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return{}}return e==null?{}:structuredClone(e)},encode:e=>JSON.stringify(e),validate:()=>!0},Bo={name:"js",decode:e=>{if(typeof e=="string")try{return fe(e)}catch{return{}}return e==null?{}:structuredClone(e)},encode:e=>JSON.stringify(e),validate:()=>!0},Wo={name:"binary",decode:e=>{let t=String(e??""),n=new Uint8Array(t.length);for(let r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n},encode:e=>e instanceof Uint8Array?Array.from(e).map(t=>String.fromCharCode(t)).join(""):"",validate:e=>e instanceof Uint8Array};function Uo(e=0,t=1){return{name:"lerp",decode:n=>Le(e,t,Number(n)),encode:n=>n,validate:()=>!0}}function Go(e=0,t=1){return{name:"inverseLerp",decode:n=>Me(e,t,Number(n)),encode:n=>n,validate:()=>!0}}function Ko(e=0,t=1,n=0,r=1,o=!0,s=!1){return{name:"fit",decode:i=>Gn(Number(i),e,t,n,r,o,s),encode:i=>i,validate:()=>!0}}var zo={string:fr,int:bo,float:vo,boolean:So,date:Eo,required:Ao,oneOf:_o,trim:To,upper:wo,lower:Co,kebab:No,camel:xo,snake:Lo,pascal:Mo,title:Fo,min:Ro,max:ko,clamp:$o,round:Xt,ceil:(e=0)=>Xt(e,"ceil"),floor:(e=0)=>Xt(e,"floor"),json:jo,js:Bo,binary:Wo,minLength:Oo,maxLength:Po,length:Io,regex:Ho,startsWith:Do,endsWith:Vo,includes:qo,lerp:Uo,inverseLerp:Go,fit:Ko};function Jo(...e){return e.length===0?fr:e.length===1?e[0]:{name:"chain",decode:t=>e.reduce((n,r)=>r.decode(n),t),encode:t=>e.reduceRight((n,r)=>r.encode(n),t),validate:t=>e.every(n=>n.validate(t))}}function en(e){let t=e.split("|");for(let n of t){let r=n.trim();if(r.startsWith("="))return r.slice(1)}return""}function dr(e){let t=e.split("|").map(r=>r.trim()).filter(Boolean),n=[];for(let r of t){if(r.startsWith("="))continue;let[o,...s]=r.split(":"),i=o.endsWith("!"),a=i?o.slice(0,-1):o,l=zo[a];if(l){let u;if(typeof l=="function"){let c=s.flatMap(f=>f.split(",")),d=i;if(!d&&c.length>0){let f=c.length-1,p=c[f]?.trim()??"";p.endsWith("!")&&(d=!0,c[f]=p.slice(0,-1))}let h=c.map(f=>{let p=f.trim();if(p==="true")return!0;if(p==="false")return!1;let g=Number(p);return Number.isNaN(g)?p:g});u=l(...h),d&&(u={name:u.name,decode:f=>f,encode:f=>f,validate:u.validate})}else u=l;i&&typeof l!="function"&&(u={name:u.name,decode:c=>c,encode:c=>c,validate:u.validate}),n.push(u)}else a&&console.warn(`[Codecs] Unknown codec: ${o}`)}return Jo(...n)}var $r=new Map,pr=new Map,mr=new Set,Ct=new Map,Zo="data-signals",it="data-rocket-loop-id",pe="data-if",Re="data-else-if",Ge="data-else",Tt="data-import:",gr="esm",tn="iife",Ae="data-for",_r="data-ignore",hr="data-static",Ke="data-rocket-scope",an="data-rocket-style-scoped",Nr="if",xr="else-if",cn="else",Yo=new Set(["bind","computed","indicator","ref","signals"]),ln=e=>e.startsWith("data-props:"),at=(e,t)=>`${e}_${t}`;globalThis.__rocketAction=function(t,n,r,o,...s){let a=Ct.get(t)?.[n];if(a){let u=()=>new Error(`[Rocket] Action "${n}" failed for ${t}`),c={el:r,evt:o,error:()=>{throw u()},cleanups:new Map};if(!a?.apply)throw new Error(`[Rocket] Invalid local action "${n}" for ${t}`);return a.apply(c,...s)}let l=Xe[n];if(typeof l=="function"){let u=()=>new Error(`[Rocket] Action "${n}" failed for ${t}`);return l({el:r,evt:o,error:()=>{throw u()},cleanups:new Map},...s)}throw new Error(`[Rocket] Undefined action "${n}"`)};var nn=new Map;function yr(e){return nn.has(e)||nn.set(e,dr(e)),nn.get(e)}var un=class{constructor(t,n,r,o){this.branches=[];this.activeBranch=null;this.fragment=document.createDocumentFragment(),this.signalPath=n,this.instanceKey=r,this.nestedSetup=o,this.initializeBranches(t)}initializeBranches(t){let n=t,r=[];if(n.hasAttribute(pe)){let o=n.getAttribute(pe);for(r.push({element:n,condition:o,type:Nr}),n=n.nextElementSibling;n;)if(n.hasAttribute(Re)){let s=n.getAttribute(Re);r.push({element:n,condition:s,type:xr}),n=n.nextElementSibling}else if(n.hasAttribute(Ge)){r.push({element:n,condition:void 0,type:cn});break}else break}for(let o of r)this.addBranch(o.element,o.condition,o.type)}addBranch(t,n,r){let o=document.createComment(`rocket-${r}${n?`: ${n}`:""}`);t.parentNode?.replaceChild(o,t),this.fragment.appendChild(t),this.branches.push({element:t,placeholder:o,condition:n,type:r})}transformExpression(t){return Ee(t,this.signalPath,this.instanceKey)}setupReactivity(t){let n=o=>{let{element:s,placeholder:i}=o;if(!(s instanceof HTMLTemplateElement))return;if(o.nestedCleanups){for(let u of o.nestedCleanups)u();o.nestedCleanups=[]}if(o.rendered){for(let u of o.rendered)u.parentNode&&u.parentNode.removeChild(u);o.rendered=[]}let a=s.content.cloneNode(!0),l=Array.from(a.childNodes);if(i.parentNode)for(let u of l)i.parentNode.insertBefore(u,i);for(let u of l)(u instanceof HTMLElement||u instanceof SVGElement)&&Se(u,!1);if(this.nestedSetup)o.nestedCleanups=this.nestedSetup(l);else{let u=mn(l);if(u.length>0){let c=gn(u,this.signalPath,t,this.instanceKey),d=c.pop(),h=[];for(let f of c){let p=I(f);p&&h.push(p)}d&&h.push(d),o.nestedCleanups=h}}o.rendered=l};return(o=!1,s)=>{let i=null;for(let a of this.branches){if(a.type===cn){i=a;break}if(a.condition){let l=this.transformExpression(a.condition),u=s??a.placeholder;if(t(l,u)){i=a;break}}}if(this.activeBranch!==i){if(this.activeBranch){if(this.activeBranch.nestedCleanups){for(let u of this.activeBranch.nestedCleanups)u();this.activeBranch.nestedCleanups=[]}let{element:a,placeholder:l}=this.activeBranch;if(a instanceof HTMLTemplateElement){if(this.activeBranch.rendered){for(let u of this.activeBranch.rendered)u.parentNode&&u.parentNode.removeChild(u);this.activeBranch.rendered=[]}}else a.parentNode&&(a.parentNode.replaceChild(l,a),this.fragment.appendChild(a))}if(i){let{element:a,placeholder:l}=i;a instanceof HTMLTemplateElement?n(i):l.parentNode&&l.parentNode.replaceChild(a,l)}this.activeBranch=i}else o&&i&&i.element instanceof HTMLTemplateElement&&n(i)}}cleanup(){if(this.activeBranch?.rendered){for(let t of this.activeBranch.rendered)t instanceof Element&&(t.hasAttribute(pe)||t.hasAttribute(Re)||t.hasAttribute(Ge))||t.parentNode&&t.parentNode.removeChild(t);this.activeBranch.rendered=[]}}};function Qo(e){if(!e.hasAttribute(pe))return!1;let t=e.previousElementSibling;return!t||!t.hasAttribute(pe)&&!t.hasAttribute(Re)}function mn(e){let t=[],n=new Set,r=o=>{if(!Qo(o)||n.has(o))return;t.push(o);let s=o;for(;s&&(n.add(s),s=s.nextElementSibling,!(s&&!s.hasAttribute(Re)&&!s.hasAttribute(Ge))););};for(let o of e){if(!(o instanceof Element))continue;o.hasAttribute(pe)&&r(o);let s=o.querySelectorAll(`[${pe}]`);for(let i of s)r(i)}return t}function gn(e,t,n,r,o){let s=[],i=[];for(let l of e){let u=new un(l,t,r,o),c=u.setupReactivity(n);s.push(u),i.push(c)}let a=()=>{for(let l of s)l.cleanup()};return[...i,a]}function Xo(e,t,n,r,o){let s=mn([e]);return gn(s,t,n,r,o)}function br(e,t){if(!(e instanceof HTMLTemplateElement))throw new Error(`[Rocket] ${t} can only be used on <template> elements`)}var fn="__rocketLoopCtx",vr=0;function Lr(){return vr+=1,`rocket-loop-${vr}`}var ct="data-rocket-scoped",Rt="__rocketTemplateVersion";function rn(e,t,n,r){let o=[],s=t.getAttribute(Ke);if(s){let i=Pr(s);Or(t,i,s,t)}for(let i of Array.from(t.children))o.push(...ts(e,i,n,r));return o}function es(e,t,n,r){let o=`${n}:${r}`,s=Array.from(t.content.querySelectorAll("*")),i=!1;for(let a of s)a.getAttribute(ct)!==o&&($t(e,a,n,r),a.setAttribute(ct,o),i=!0);if(i){let a=t[Rt]??0;t[Rt]=a+1}}function ts(e,t,n,r){let o=[],s=`${n}:${r}`,i=[t,...Array.from(t.querySelectorAll("*"))];for(let a of i){let l=a.getAttribute(ct)===s;l&&!(a instanceof HTMLTemplateElement)||($t(e,a,n,r),l||(a.setAttribute(ct,s),o.push(a)),a instanceof HTMLTemplateElement&&es(e,a,n,r))}return o}function ns(e,t){H([["_rocket",V._rocket??{}],[`_rocket.${e}`,V._rocket?.[e]??{}],[`_rocket.${e}.${t}`,V._rocket?.[e]?.[t]??{}]])}function kt(e){if(!e)return null;let t=/^\s*([A-Za-z_$][\w$]*)(?:\s*,\s*([A-Za-z_$][\w$]*))?\s+in\s+([\s\S]+?)\s*$/,n=e.match(t);if(!n)return null;let[,r,o,s]=n;return{itemAlias:r,indexAlias:o||void 0,expression:s.trim()}}function rs(e){return e==null?[]:Array.isArray(e)?e.map((t,n)=>({value:t,key:n})):typeof e=="string"?Array.from(e).map((t,n)=>({value:t,key:n})):e instanceof Map?Array.from(e.entries()).map(([t,n])=>({value:n,key:t})):e instanceof Set?Array.from(e.values()).map((t,n)=>({value:t,key:n})):typeof e[Symbol.iterator]=="function"?Array.from(e).map((t,n)=>({value:t,key:n})):typeof e=="object"?Object.entries(e).map(([t,n])=>({value:n,key:t})):[]}function os(e){let t=e,n=0;for(;typeof t=="function"&&n<8;){let r=t();if(r===t)break;t=r,n+=1}return t}function ss(e){let t=e.trim();return t.startsWith("$.")?t.slice(2):null}function is(e,t){if(!e||typeof e!="object")return!1;let n=t.split(".").filter(Boolean),r=e;for(let o=0;o<n.length;o+=1){if(!r||typeof r!="object"||!(n[o]in r))return!1;if(o===n.length-1)return!0;r=r[n[o]]}return!1}var Sr="__rocketPostRender";function Mr(e){let t=e[Sr];if(t)return t;let n={effects:new Set,scheduled:!1};return e[Sr]=n,n}function as(e){if(!e)return null;if(e instanceof HTMLElement&&e.isRocketComponent)return e;let t=e?.parentElement??null;for(;t;){if(t.isRocketComponent)return t;t=t.parentElement}let n=e.getRootNode?.();if(n instanceof ShadowRoot){let r=n.host;if(r instanceof HTMLElement&&r.isRocketComponent)return r}return null}function cs(e){let t=as(e);if(!t)return;let n=Mr(t);!n.effects.size||n.scheduled||(n.scheduled=!0,queueMicrotask(()=>{n.scheduled=!1;for(let r of Array.from(n.effects))try{r()}catch(o){console.error("[Rocket] post-render effect error",o)}}))}function ls(e){let t=e[fn];return t||(t=new Map,Object.defineProperty(e,fn,{value:t,configurable:!0})),t}function Er(e,t,n){for(let r of e)ls(r).set(t,n),r.__rocketScopeCtx={...r.__rocketScopeCtx,...n}}function us(e){let t={},n=e;for(;n;){let r=n.__rocketScopeCtx;if(r)for(let[i,a]of Object.entries(r))i in t||(t[i]=a);let o=n[fn];if(o)for(let i of o.values())for(let[a,l]of Object.entries(i))a in t||(t[a]=l);n=n.parentNode??(n instanceof ShadowRoot?n.host??null:null)}return t}typeof globalThis.__rocketScope!="function"&&(globalThis.__rocketScope=us);var Ar="__rocketLoopInit";function Fr(e,t){let n=new Set,r=[];for(let s of e)if(s instanceof HTMLTemplateElement&&s.hasAttribute(Ae)&&(n.has(s)||(n.add(s),r.push(s))),s instanceof Element||s instanceof DocumentFragment||s instanceof ShadowRoot){let i=Array.from(s.querySelectorAll(`template[${Ae}]`));for(let a of i)n.has(a)||(n.add(a),r.push(a))}let o=[];for(let s of r){if(s[Ar])continue;let i=s.getAttribute(Ae),a=kt(i);if(!a)continue;s[Ar]=!0;let l=s.getAttribute(it);l||(l=Lr(),s.setAttribute(it,l));let u=M=>Function("$","el",`return ${M}`),c=u(a.expression),d=s.getAttribute("data-key"),h=d&&d.trim().length>0?Function("item","index","$","el",`return ${d}`):null,f=document.createComment(`rocket-for:${l}`);s.parentNode?.insertBefore(f,s);let p=[],g=s[Rt]??0,y=null,m=ss(a.expression);m&&(y=M=>{is(M.detail,m)&&v()},document.addEventListener(ue,y));let v=(M=!1)=>{let F=M,C=s.getAttribute(Ae);if(C&&C!==i){let b=kt(C);if(b){i=C,a=b,c=u(a.expression);let w=s.getAttribute("data-key");w!==d&&(d=w,h=d&&d.trim().length>0?Function("item","index","$","el",`return ${d}`):null)}}if(!a)return;let S=c(V,f),L=rs(os(S)),E=f.parentNode??s.parentNode;if(!E)return;f.parentNode||E.insertBefore(f,s);let A=s[Rt]??0;if(A!==g){let b=g!==0;if(g=A,b){F=!0;for(let w of p){if(w.nestedCleanups){for(let T of w.nestedCleanups)T();w.nestedCleanups=[]}for(let T of w.nodes)T.parentNode&&T.parentNode.removeChild(T)}p=[]}}let $=[];if(h){let b=new Map;for(let w of p)b.set(w.key,w);for(let w=0;w<L.length;w+=1){let{value:T}=L[w],x=h(T,w,V,f),R=b.get(x),k=!1;if(R)b.delete(x);else{let P=s.content.cloneNode(!0);R={nodes:Array.from(P.childNodes),key:x},k=!0}R.key=x,Er(R.nodes,l,{[a.itemAlias]:T,...a.indexAlias?{[a.indexAlias]:w}:{}}),(k||M)&&(k&&(F=!0),R.nodes.forEach(P=>{(P instanceof HTMLElement||P instanceof SVGElement)&&Se(P,!1)}),t?.nestedSetup&&(R.nestedCleanups=t.nestedSetup(R.nodes))),$.push(R)}b.size>0&&(F=!0);for(let w of b.values()){if(w.nestedCleanups){for(let T of w.nestedCleanups)T();w.nestedCleanups=[]}for(let T of w.nodes)T.parentNode&&T.parentNode.removeChild(T)}}else{for(let b=0;b<L.length;b+=1){let{value:w}=L[b],T=p[b],x=!1;if(!T){let R=s.content.cloneNode(!0);T={nodes:Array.from(R.childNodes)},x=!0}Er(T.nodes,l,{[a.itemAlias]:w,...a.indexAlias?{[a.indexAlias]:b}:{}}),(x||M)&&(x&&(F=!0),T.nodes.forEach(R=>{(R instanceof HTMLElement||R instanceof SVGElement)&&Se(R,!1)}),t?.nestedSetup&&(T.nestedCleanups=t.nestedSetup(T.nodes))),$.push(T)}p.length>L.length&&(F=!0);for(let b=L.length;b<p.length;b+=1){let w=p[b];if(w.nestedCleanups){for(let T of w.nestedCleanups)T();w.nestedCleanups=[]}for(let T of w.nodes)T.parentNode&&T.parentNode.removeChild(T)}}for(let b=0;b<$.length;b+=1){let w=$[b];for(let T of w.nodes)E.insertBefore(T,f)}p=$,F&&cs(s)};v(),v();let N=I(v);o.push({render:()=>v(!0),cleanup:()=>{N(),y&&document.removeEventListener(ue,y);for(let M of p){if(M.nestedCleanups){for(let F of M.nestedCleanups)F();M.nestedCleanups=[]}for(let F of M.nodes)F.parentNode&&F.parentNode.removeChild(F)}f.parentNode&&f.parentNode.removeChild(f)}})}return o}function fs(e,t){return Fr([e],t)}function Tr(e){let t;return t=n=>{let r=[],o=Fr(n,{nestedSetup:t});for(let i of o)r.push(i.cleanup);let s=mn(n);if(s.length>0){let i=gn(s,e.signalPath,e.evaluateExpression,e.instanceKey,t),a=i.pop();for(let l of i){let u=I(l);u&&r.push(u)}a&&r.push(a)}return r},t}function $t(e,t,n,r,o=[]){t.hasAttribute(Ae)&&br(t,Ae),(t.hasAttribute(pe)||t.hasAttribute(Re)||t.hasAttribute(Ge))&&br(t,`${pe}/${Re}/${Ge}`);let s=`_rocket.${n}.${r}`,i=at(n,r),a;if(t instanceof HTMLTemplateElement&&t.hasAttribute(Ae)){let c=kt(t.getAttribute(Ae));if(c){let d=t.getAttribute(it)??Lr();t.setAttribute(it,d),a={loopId:d,itemAlias:c.itemAlias,indexAlias:c.indexAlias}}}let l=a?[...o,a]:o;for(let c of[...t.attributes]){if(!c.name.startsWith("data-")||c.name===_r||c.name===ct||c.name===Ke||c.name===an||ln(c.name)||c.name?.includes("__rocketScope(")||c.name?.includes(`_rocket.${n}.${r}`)||c.value?.includes("__rocketScope(")||c.value?.includes(`_rocket.${n}.${r}`)||c.value?.includes(`{_rocket:{${n}:{${r}:{`)||c.name.startsWith(Tt)||c.name===it)continue;let h=c.name.slice(5);if(h===Nr||h===xr){let m=Ee(c.value,s,i);c.value=l.length?Ue(m,l):m;continue}if(h===cn)continue;if(h==="for"){let m=kt(c.value);if(m){let v=Ee(m.expression,s,i);o.length&&(v=Ue(v,o));let N=m.indexAlias?`${m.itemAlias}, ${m.indexAlias}`:m.itemAlias;c.value=`${N} in ${v}`}else{let v=Ee(c.value,s,i);o.length&&(v=Ue(v,o)),c.value=v}continue}if(h==="key"){c.value=Ee(c.value,s,i,{wrapInScope:!1});continue}let f=h,{pluginName:p,key:g}=vt(f);if(!e.has(p))continue;let y=p==="on"||p==="init";if(Yo.has(p)){let m=h.indexOf(":");if(m!==-1){let v=h.slice(m+1);v=v.replace(g,`${s}.${g}`);let N=Ee(c.value,s,i,{wrapInScope:!1});l.length&&(N=Ue(N,l)),t.removeAttribute(c.name),t.setAttribute(`data-${p}:${v}`,N)}else if(p==="signals"||p==="computed"){let v=Ee(c.value,s,i,{wrapInScope:!1});l.length&&(v=Ue(v,l));let N=s.split("."),M=v;for(let F=N.length-1;F>=0;F--)M=`{${N[F]}:${M}}`;c.value=M}else c.value.startsWith("$$")?c.value=`${s}.${c.value.slice(2)}`:!c.value.includes(".")&&!c.value.includes("[")&&(c.value=`${s}.${c.value}`);p==="ref"&&c.value&&H([[c.value,t]])}else{let m=Ee(c.value,s,i,y?{statement:!0}:void 0);c.value=l.length?Ue(m,l):m}}let u=t instanceof HTMLTemplateElement?Array.from(t.content.children):Array.from(t.children);for(let c of u)$t(e,c,n,r,l)}function Ee(e,t,n,r){return e=e.replace(/\$\$computed\.(\w+)/g,`$.${t}.computed.$1()`),e=e.replace(/\$\$([a-zA-Z_]\w*)/g,`$.${t}.$1`),n&&(e=e.replace(/@([A-Za-z_$][\w$]*)\(/g,(o,s)=>`__rocketAction("${n}","${s}",el,evt,`)),r?.wrapInScope===!1,e}function ds(e){let t=new Set,n=0,r=0,o=e.length,s=!1,i=!1,a=!1,l=!1,u=!1;for(;r<o;){let c=e[r],d=e[r+1];if(l){c===`
`&&(l=!1),r+=1;continue}if(u){if(c==="*"&&d==="/"){u=!1,r+=2;continue}r+=1;continue}if(s){if(c==="\\"){r+=2;continue}c==="'"&&(s=!1),r+=1;continue}if(i){if(c==="\\"){r+=2;continue}c==='"'&&(i=!1),r+=1;continue}if(a){if(c==="\\"){r+=2;continue}c==="`"&&(a=!1),r+=1;continue}if(c==="/"&&d==="/"){l=!0,r+=2;continue}if(c==="/"&&d==="*"){u=!0,r+=2;continue}if(c==="'"){s=!0,r+=1;continue}if(c==='"'){i=!0,r+=1;continue}if(c==="`"){a=!0,r+=1;continue}if(c==="{"){n+=1,r+=1;continue}if(c==="}"){n>0&&(n-=1),r+=1;continue}if(n===0){if(wt(e,r,"function")){r+=8,r=sn(e,r);let f=wr(e,r);if(f){t.add(f.name),r=f.end;continue}}let h=ps(e,r);if(h){r+=h.length,r=sn(e,r);let f=wr(e,r);if(f){let p=sn(e,f.end);if(e[p]==="="){let g=e.slice(p+1);(/^\s*function\b/.test(g)||/^\s*(?:\([^)]*\)|[A-Za-z_$][A-Za-z0-9_$]*)\s*=>/.test(g))&&t.add(f.name)}r=f.end;continue}}}r+=1}return Array.from(t)}function ps(e,t){return wt(e,t,"const")?"const":wt(e,t,"let")?"let":wt(e,t,"var")?"var":null}var _t=/[A-Za-z0-9_$]/;function on(e,t,n){let r=e[t-1],o=e[t+n.length],s=i=>!!i&&_t.test(i);return e.startsWith(n,t)&&!s(r)&&!s(o)}function ms(e){let t=e.length,n=0,r="",o=0,s=!1,i=!1,a=!1,l=!1,u=!1,c=0,d=p=>p===" "||p==="	"||p===`
`||p==="\r",h=p=>{if(!/[A-Za-z_$]/.test(e[p]||""))return null;let g=p+1;for(;g<t&&_t.test(e[g]);)g+=1;return{name:e.slice(p,g),end:g}},f=p=>{let g=0,y=p,m="",v=!1,N=!1,M=!1,F=!1,C=!1;for(;y<t;){let S=e[y],L=e[y+1];if(F){S===`
`&&(F=!1),m+=S,y+=1;continue}if(C){if(S==="*"&&L==="/"){C=!1,m+="*/",y+=2;continue}m+=S,y+=1;continue}if(v){if(S==="\\"){m+=S,y+1<t&&(m+=e[y+1]),y+=2;continue}S==="'"&&(v=!1),m+=S,y+=1;continue}if(N){if(S==="\\"){m+=S,y+1<t&&(m+=e[y+1]),y+=2;continue}S==='"'&&(N=!1),m+=S,y+=1;continue}if(M){if(S==="\\"){m+=S,y+1<t&&(m+=e[y+1]),y+=2;continue}S==="`"&&(M=!1),m+=S,y+=1;continue}if(S==="/"&&L==="/"){F=!0,m+="//",y+=2;continue}if(S==="/"&&L==="*"){C=!0,m+="/*",y+=2;continue}if(S==="'"){v=!0,m+=S,y+=1;continue}if(S==='"'){N=!0,m+=S,y+=1;continue}if(S==="`"){M=!0,m+=S,y+=1;continue}if(S==="("&&(g+=1),S===")"&&(g-=1,g===0)){m+=S,y+=1;break}m+=S,y+=1}return{text:m,end:y}};for(;n<t;){let p=e[n],g=e[n+1];if(l){p===`
`&&(l=!1),n+=1;continue}if(u){if(p==="*"&&g==="/"){u=!1,n+=2;continue}n+=1;continue}if(s){if(p==="\\"){n+=2;continue}p==="'"&&(s=!1),n+=1;continue}if(i){if(p==="\\"){n+=2;continue}p==='"'&&(i=!1),n+=1;continue}if(a){if(p==="\\"){n+=2;continue}p==="`"&&(a=!1),n+=1;continue}if(p==="/"&&g==="/"){l=!0,n+=2;continue}if(p==="/"&&g==="*"){u=!0,n+=2;continue}if(p==="'"){s=!0,n+=1;continue}if(p==='"'){i=!0,n+=1;continue}if(p==="`"){a=!0,n+=1;continue}if(p==="{"){c+=1,n+=1;continue}if(p==="}"){c>0&&(c-=1),n+=1;continue}if(c===0&&(on(e,n,"const")||on(e,n,"let"))){let y=e.slice(n,n+5).trim(),m=n+y.length;for(;m<t&&d(e[m]);)m+=1;let v=h(m);if(!v){n+=1;continue}for(m=v.end;m<t&&d(e[m]);)m+=1;if(e[m]!=="="){n+=1;continue}for(m+=1;m<t&&d(e[m]);)m+=1;let N="";if(on(e,m,"async"))for(N="async ",m+=5;m<t&&d(e[m]);)m+=1;let M="";if(e[m]==="("){let L=f(m);M=L.text,m=L.end}else{let L=h(m);if(!L){n+=1;continue}M=L.name,m=L.end}for(;m<t&&d(e[m]);)m+=1;if(!(e[m]==="="&&e[m+1]===">")){n+=1;continue}for(m+=2;m<t&&d(e[m]);)m+=1;let F="";if(e[m]==="{"){let L=0,E=m,A=!1,$=!1,b=!1,w=!1,T=!1;for(;E<t;){let x=e[E],R=e[E+1];if(w){x===`
`&&(w=!1),E+=1;continue}if(T){if(x==="*"&&R==="/"){T=!1,E+=2;continue}E+=1;continue}if(A){if(x==="\\"){E+=2;continue}x==="'"&&(A=!1),E+=1;continue}if($){if(x==="\\"){E+=2;continue}x==='"'&&($=!1),E+=1;continue}if(b){if(x==="\\"){E+=2;continue}x==="`"&&(b=!1),E+=1;continue}if(x==="/"&&R==="/"){w=!0,E+=2;continue}if(x==="/"&&R==="*"){T=!0,E+=2;continue}if(x==="'"){A=!0,E+=1;continue}if(x==='"'){$=!0,E+=1;continue}if(x==="`"){b=!0,E+=1;continue}if(x==="{"&&(L+=1),x==="}"&&(L-=1,L===0)){F=e.slice(m+1,E),m=E+1;break}E+=1}}else{let L=m,E="",A=0;for(;L<t;){let $=e[L];if($==="("&&(A+=1),$===")"&&(A-=1),($===";"||$===`
`)&&A===0)break;E+=$,L+=1}F=`return ${E.trim()};`,m=L}let C=M.startsWith("(")?M:`(${M})`,S=`${N}function ${v.name}${C} {${F}}
`;r+=e.slice(o,n)+S,o=m,n=m;continue}n+=1}return o<t&&(r+=e.slice(o)),r}function Ue(e,t){if(!t.length||!e)return e;let n=[];for(let l=t.length-1;l>=0;l--){let u=t[l];n.push({alias:u.itemAlias,replacement:`(__rocketScope(el).${u.itemAlias})`}),u.indexAlias&&n.push({alias:u.indexAlias,replacement:`(__rocketScope(el).${u.indexAlias})`})}let r=l=>!!l&&_t.test(l),o=e.length,s=(l,u)=>{let c=l+1,d=e[l];for(;c<o;){let h=e[c];if(d+=h,h==="\\"&&c+1<o){d+=e[c+1],c+=2;continue}if(h===u){c+=1;break}c+=1}return{text:d,end:c}},i=l=>{let u=l+1,c="`";for(;u<o;){let d=e[u];if(d==="\\"&&(c+=d,u+1<o)){c+=e[u+1],u+=2;continue}if(d==="`"){c+=d,u+=1;break}if(d==="$"&&e[u+1]==="{"){c+="${";let h=a(u+2,"}");if(c+=h.text,e[h.end]==="}"){c+="}",u=h.end+1;continue}u=h.end;continue}c+=d,u+=1}return{text:c,end:u}},a=(l,u)=>{let c=l,d="",h=0;for(;c<o;){let f=e[c];if(u&&f===u&&h===0)return{text:d,end:c};if(f==="'"||f==='"'){let g=s(c,f);d+=g.text,c=g.end;continue}if(f==="`"){let g=i(c);d+=g.text,c=g.end;continue}if(u){if(f==="{"){h+=1,d+=f,c+=1;continue}if(f==="}"&&h>0){h-=1,d+=f,c+=1;continue}}let p=!1;for(let g of n){let y=g.alias.length;if(e.startsWith(g.alias,c)&&!r(e[c-1])&&!r(e[c+y])){d+=g.replacement,c+=y,p=!0;break}}p||(d+=f,c+=1)}return{text:d,end:c}};return a(0).text}function Or(e,t,n,r){let o=i=>{let a=i.length,l=0,u="";for(;l<a;){let c=l,d=!1,h=!1,f=!1,p=0,g=0;for(;c<a;){let C=i[c],S=i[c+1];if(f){if(C==="*"&&S==="/"){f=!1,c+=2;continue}c+=1;continue}if(d){if(C==="\\"){c+=2;continue}C==="'"&&(d=!1),c+=1;continue}if(h){if(C==="\\"){c+=2;continue}C==='"'&&(h=!1),c+=1;continue}if(C==="/"&&S==="*"){f=!0,c+=2;continue}if(C==="'"){d=!0,c+=1;continue}if(C==='"'){h=!0,c+=1;continue}if(C==="("&&(p+=1),C===")"&&p>0&&(p-=1),C==="["&&(g+=1),C==="]"&&g>0&&(g-=1),p===0&&g===0&&(C==="{"||C===";"))break;c+=1}if(c>=a){u+=i.slice(l);break}let y=i[c],m=i.slice(l,c);if(y===";"){u+=`${m};`,l=c+1;continue}let v=c+1,N=1;for(d=!1,h=!1,f=!1;v<a;){let C=i[v],S=i[v+1];if(f){if(C==="*"&&S==="/"){f=!1,v+=2;continue}v+=1;continue}if(d){if(C==="\\"){v+=2;continue}C==="'"&&(d=!1),v+=1;continue}if(h){if(C==="\\"){v+=2;continue}C==='"'&&(h=!1),v+=1;continue}if(C==="/"&&S==="*"){f=!0,v+=2;continue}if(C==="'"){d=!0,v+=1;continue}if(C==='"'){h=!0,v+=1;continue}if(C==="{"&&(N+=1),C==="}"&&(N-=1),v+=1,N===0)break}let M=i.slice(c+1,v-1),F=m.trim();if(F.startsWith("@")){let C=F.slice(1).split(/[\s{(]/,1)[0].toLowerCase();C==="keyframes"||C==="-webkit-keyframes"||C==="-moz-keyframes"||C==="font-face"||C==="page"||C==="counter-style"||C==="property"?u+=`${m}{${M}}`:u+=`${m}{${o(M)}}`}else{let C=[],S="";d=!1,h=!1,f=!1,p=0,g=0;for(let E=0;E<m.length;E+=1){let A=m[E],$=m[E+1];if(f){S+=A,A==="*"&&$==="/"&&(S+=$,E+=1,f=!1);continue}if(d){if(S+=A,A==="\\"&&E+1<m.length){S+=m[E+1],E+=1;continue}A==="'"&&(d=!1);continue}if(h){if(S+=A,A==="\\"&&E+1<m.length){S+=m[E+1],E+=1;continue}A==='"'&&(h=!1);continue}if(A==="/"&&$==="*"){S+=`${A}${$}`,E+=1,f=!0;continue}if(A==="'"){d=!0,S+=A;continue}if(A==='"'){h=!0,S+=A;continue}if(A==="("&&(p+=1),A===")"&&p>0&&(p-=1),A==="["&&(g+=1),A==="]"&&g>0&&(g-=1),A===","&&p===0&&g===0){C.push(S),S="";continue}S+=A}S.length&&C.push(S);let L=[];for(let E of C){let A=E.trim();if(A){if(A.startsWith(":global(")&&A.endsWith(")")){A=A.slice(8,-1).trim(),A&&L.push(A);continue}if(A.includes(`[${Ke}=`)||A.includes(t)){L.push(A);continue}A=A.replace(/:host\(([^)]+)\)/g,($,b)=>`${t}${b}`),A=A.replace(/:host\b/g,t),A=A.replace(/:scope\b/g,t),L.push(`${t} ${A}`)}}u+=`${L.join(", ")}{${M}}`}l=v}return u},s=e.querySelectorAll("style");for(let i of Array.from(s)){if(r){let u=i.closest(`[${Ke}]`);if(u&&u!==r)continue;let c=i.parentElement,d=!1;for(;c&&c!==r;){if(c.isRocketComponent){d=!0;break}c=c.parentElement}if(d)continue}if(i.getAttribute(an)===n)continue;let a=i.textContent??"",l=o(a);i.textContent=l,i.setAttribute(an,n)}}function Pr(e){let t=e.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return`[${Ke}="${t}"]`}function wt(e,t,n){if(!e.startsWith(n,t))return!1;let r=t-1>=0?e[t-1]:void 0,o=e[t+n.length];return!(dn(r)||dn(o))}function sn(e,t){for(;t<e.length&&/\s/.test(e[t]);)t+=1;return t}function wr(e,t){let n=e[t];if(!gs(n))return null;let r=t+1;for(;r<e.length&&dn(e[r]);)r+=1;return{name:e.slice(t,r),end:r}}function gs(e){return!!e&&/[A-Za-z_$]/.test(e)}function dn(e){return!!e&&_t.test(e)}function hs(e,t,n,r,o,s){e=ms(e);let{$:i}=s,a=at(t,n),l=Ct.get(a)??(()=>{let g={};return Ct.set(a,g),g})(),u=`_rocket.${t}.${n}`;e=Ee(e,u,a,{wrapInScope:!1,statement:!0}),e=e.replace(/\$\['([a-zA-Z_$\d][\w$]*)'\]/g,"$$$1").replace(/\$(?!\.)([a-zA-Z_\d]\w*(?:[.-]\w+)*)/g,(g,y)=>y.split(".").reduce((m,v)=>`${m}['${v}']`,"$"));let c=Object.entries(r).map(([g,y])=>typeof y=="function"||typeof y=="object"&&y!==null?`const ${g} = staticData.${g};`:`const ${g} = ${JSON.stringify(y)};`).join(`
`),d=e?`
      ${e}
    `:"",h=`
    return (() => {
      // Inject static data and imports FIRST
      ${c}
      
      // Track cleanup functions
      const __cleanupFns = [];
      const __localActionsTarget = (typeof __localActions === 'object' && __localActions !== null)
        ? __localActions
        : {};
      const __safeProxy = (target, handler, fallbackFactory) => {
        let base = target;
        if (typeof base !== 'object' || base === null) {
          base = fallbackFactory ? fallbackFactory(base) : {};
        }
        try {
          return new Proxy(base, handler);
        } catch (err) {
          console.warn('[Rocket] Proxy fallback', err);
          return base;
        }
      };
      
      // Component instance state (user's code will use $$)
      const $$signals =
        ($._rocket?.["${t}"]?.["${n}"]) ??
        (() => {
          $._rocket = $._rocket || {};
          $._rocket["${t}"] = $._rocket["${t}"] || {};
          $._rocket["${t}"]["${n}"] = {};
          return $._rocket["${t}"]["${n}"];
        })();
      
      // Create proxy for component signals (refs are now regular scoped signals)
      const $$ = __safeProxy(
        $$signals,
        {
          get(target, prop) {
            return target[prop];
          },
          set(target, prop, value) {
            return Reflect.set(target, prop, value);
          },
        },
        (target) => target || {},
      );
      
      // Create el from passed parameter
      const el = __el;
      const __postRenderState = __postRenderStateParam;
      
      // onCleanup function that works like effect
      const onCleanup = (fn) => __cleanupFns.push(fn);
      
      // Computed properties helper
      const $$computed = __safeProxy(
        {},
        {
          get(target, prop) {
            // Return the computed function result
            return $$.computed[prop]?.();
          },
          set(target, prop, getter) {
            // Store the getter function
            $$.computed[prop] = getter;
            return true;
          },
        },
        (target) => target || {},
      );
      
      // Helper to create error objects with metadata structure
      const createErrorObject = (errorsByAttr) => {
        const metadata = errorsByAttr || {};
        let totalCount = 0;
        
        // Calculate totals
        for (const attr in metadata) {
          const errorList = metadata[attr];
          if (Array.isArray(errorList) && errorList.length > 0) {
            totalCount += errorList.length;
          }
        }
        
        return {
          metadata,
          count: totalCount,
          has: (attr) => {
            const errorList = metadata[attr];
            return Array.isArray(errorList) && errorList.length > 0;
          }
        };
      };
      
      // Create effect and computed from passed parameters
      const effect = (fn) => {
        __postRenderState.effects.add(fn);
        let disposed = false;
        const cleanup = __effect(fn);
        const dispose = () => {
          if (disposed) return;
          disposed = true;
          __postRenderState.effects.delete(fn);
          if (cleanup) cleanup();
        };
        __cleanupFns.push(dispose);
        return dispose;
      };
      const computed = __computed;
      
      // Create actions proxy that auto-curries with {el} and prefers local actions
      const __defaultCleanups = new Map();
      const __defaultError = (code, meta) => {
        const err = new Error(code);
        err.meta = meta;
        return err;
      };
      const __localActionInvoker = (localAction) =>
        typeof localAction?.apply === 'function'
          ? (...args) =>
              localAction?.apply?.(
                { el, cleanups: __defaultCleanups, evt: undefined, error: __defaultError },
                ...args,
              )
          : undefined;
      const action = (plugin) => {
        if (!plugin || typeof plugin !== 'object') {
          throw new Error('[Rocket] action() expects a plugin object');
        }
        const name = plugin.name;
        if (typeof name !== 'string' || name.length === 0) {
          throw new Error('[Rocket] action() requires a string name');
        }
        if (typeof plugin.apply !== 'function') {
          throw new Error('[Rocket] action() requires an apply function');
        }
        __localActionsTarget[name] = plugin;
        return plugin;
      };
      const actions = __safeProxy(
        __localActionsTarget,
        {
          get(target, prop) {
            if (typeof prop !== 'string') {
              return undefined;
            }
            if (prop in target) {
              return __localActionInvoker(target[prop]);
            }
            const action = __actions[prop];
            if (typeof action === 'function') {
              // Return a curried version that automatically includes {el}
              return (...args) => {
                return action(
                  { el, cleanups: __defaultCleanups, evt: undefined, error: __defaultError },
                  ...args,
                );
              };
            }
            return action;
          },
          set(target, prop, value) {
            throw new TypeError('[Rocket] actions is read-only');
          }
        },
        (target) => {
          const fallback = target || {};
          return new Proxy(fallback, {
            get(obj, prop) {
              if (typeof prop !== 'string') {
                return undefined;
              }
              if (prop in obj) {
                return __localActionInvoker(obj[prop]);
              }
              const action = __actions[prop];
              if (typeof action === 'function') {
                return (...args) =>
                  action(
                    { el, cleanups: __defaultCleanups, evt: undefined, error: __defaultError },
                    ...args,
                  );
              }
              return action;
            },
            set(obj, prop, value) {
              throw new TypeError('[Rocket] actions is read-only');
            },
          });
        },
      );
      
      // User's setup code
      ${d}
      
      // Return functions and cleanup
      return { 
        functions: { ${ds(e).join(", ")} },
        cleanup: __cleanupFns.length > 0 ? () => __cleanupFns.forEach(fn => fn()) : undefined
      };
    })();
  `;return new Function("staticData","$","__el","__effect","__computed","__actions","__localActions","__postRenderStateParam",h)(r,i,o,s.effect,s.computed,s.actions,l,Mr(o))||{functions:{}}}_({name:"rocket",requirement:{key:"must",value:"denied"},apply({el:e,key:t,loadedPluginNames:n}){if(!(e instanceof HTMLTemplateElement)){console.warn("[Rocket] data-rocket-* can only be used on <template> elements");return}mr.has(t)||(mr.add(t),bs(n.attributes,e,t).then(()=>{document.querySelectorAll(t).forEach(o=>{let s=$r.get(t);if(s&&!(o instanceof s)){let i=new s;for(let a of o.attributes)i.setAttribute(a.name,a.value);for(;o.firstChild;)i.appendChild(o.firstChild);o.replaceWith(i)}})}))}});function ys(e){return new Promise((t,n)=>{if(document.querySelector(`script[src="${e}"]`)){t();return}let o=document.createElement("script");o.src=e,o.onload=()=>t(),o.onerror=()=>n(new Error(`Failed to load script: ${e}`)),document.head.appendChild(o)})}async function bs(e,t,n){var h,f,p,g,y,m,v,N,M,F,pn;let r=new Map,o=new Map,s=new Map;for(let S of t.attributes)if(S.name===Zo){let L=fe(S.value);for(let[E,A]of Object.entries(L))if(typeof A=="string"){let $=yr(A),b=en(A),w=b!==null?$.decode(b):$.decode("");r.set(E,$),o.set(E,w)}}else if(ln(S.name)){let L=S.name.replace(/^data-props:/,""),E=De(L),A=S.value,$=yr(A),b=en(A),w=b!==null?$.decode(b):$.decode("");r.set(E,$),o.set(E,w)}else if(S.name.startsWith(Tt)){let L=S.name.slice(Tt.length);if(!L)continue;let{pluginName:E,mods:A}=vt(L);if(!E)continue;let $=A.has(tn)?tn:gr,b=E.replace(/^iife-/,"").replace(/^esm-/,"");if($===gr){let w=await import(S.value),T=w.default||w;s.set(b,T)}else if($===tn){await ys(S.value);let w=window[b];s.set(b,w)}}let i=pr.get(n);if(!i){let S=t.content.querySelector(`script[${hr}]`);i=S?vs(S.textContent):{},pr.set(n,i)}let a=t.innerHTML,u=Array.from(t.content.querySelectorAll("script")).find(S=>!S.hasAttribute(hr))?.textContent||void 0,c=!!u;class d extends HTMLElement{constructor(){super();ie(this,F);ie(this,h,Es());ie(this,f,[]);ie(this,p,[]);ie(this,g,[]);ie(this,y);ie(this,m);ie(this,v,!1);ie(this,N);ie(this,M);z(this,y,r),z(this,m,o),z(this,N,()=>this.scopeHostChildren()),this.setAttribute("data-scope-children",""),this.addEventListener("datastar:scope-children",O(this,N))}static get observedAttributes(){return[...r.keys()].map(ae)}static get rocketSignals(){return o}static get rocketSignalCodecs(){return r}get isRocketComponent(){return!0}get rocketComponentName(){return n}get rocketInstanceId(){return O(this,h)}scopeHostChildren(){let E=be(n),A=at(E,O(this,h)),$=`_rocket.${E}.${O(this,h)}`,w=Tr({signalPath:$,instanceKey:A,evaluateExpression:(k,P)=>{let q=V,oe=P??this;return Function("$","el",`return ${k}`)(q,oe)}});ns(E,O(this,h));let T=rn(e,this,E,O(this,h)),x=new Set(T);for(let k of T){let P=k.parentElement,q=!1;for(;P;){if(x.has(P)){q=!0;break}if(P===this)break;P=P.parentElement}q||k instanceof HTMLTemplateElement&&(k.hasAttribute(pe)||k.hasAttribute(Re)||k.hasAttribute(Ge)||k.hasAttribute(Ae))||(k instanceof HTMLElement||k instanceof SVGElement)&&Se(k,!1)}if(O(this,g).length>0)for(let k of O(this,g))k.render();let R=V._rocket?.[E]?.[O(this,h)];if(R){let k=[];for(let[P,q]of Object.entries(R))k.push([`_rocket.${E}.${O(this,h)}.${P}`,q]);H(k),B(R,"result")&&R.result!==void 0&&H([["result",R.result]])}R&&!c&&!O(this,M)&&B(R,"ifRan")&&B(V,"result")&&(z(this,M,I(()=>{let k=V._rocket?.[E]?.[O(this,h)];if(k&&B(k,"ifRan")){let P=k.ifRan;P!==void 0&&H([["result",P]])}})),O(this,f).push(O(this,M))),Lt(this,F,pn).call(this,$,A,w),queueMicrotask(()=>{let k=V._rocket?.[E]?.[O(this,h)];if(k&&B(k,"result")){let q=k.result;q!==void 0&&H([["result",q]])}})}attributeChangedCallback(E,A,$){if(!this.isConnected||O(this,v))return;let b=E.includes("-")?De(E):E,w=O(this,y).get(b);if(!w)return;let T,x=[];if($!==null){let j=w.name==="boolean"&&$===""?"true":$;if(T=w.decode(j),!w.validate(T)){let ke={attr:b,codec:w.name==="chain"?"validation":w.name,value:T};x.push(ke),T=O(this,m).get(b)}}else T=O(this,m).get(b);let R=be(n),k=`_rocket.${R}.${O(this,h)}.${b}`,P=V._rocket?.[R]?.[O(this,h)]?.[b];if((typeof P=="object"&&P!==null&&typeof T=="object"&&T!==null?(()=>{let j=typeof P=="function"?P():P;return JSON.stringify(j)})()===JSON.stringify(T):P===T)&&x.length===0)return;let J={...{}};x.length>0?J[b]=x:delete J[b];let me=`_rocket.${R}.${O(this,h)}.errs`,le=`_rocket.${R}.${O(this,h)}.hasErrs`,Oe=[[k,T]];Object.keys(J).length>0?Oe.push([me,J],[le,!0]):Oe.push([me,void 0],[le,!1]),z(this,v,!0),H(Oe),z(this,v,!1),this.dispatchEvent(new CustomEvent("change",{detail:{signal:E,value:T,errors:x},bubbles:!0}))}connectedCallback(){let E=t.hasAttribute("data-shadow-open"),A=t.hasAttribute("data-shadow-closed"),$=E||A;E&&A&&console.warn("[Rocket] only one of data-shadow-open or data-shadow-closed should be used on a template");let b=this;if($){let Y=E?"open":"closed";b=this.attachShadow({mode:Y})}let w=be(n),T=at(w,O(this,h)),x=!$,R=x?`${w}-${O(this,h)}`:null,k=R?Pr(R):null;x&&R&&this.setAttribute(Ke,R);let P=`_rocket.${w}.${O(this,h)}`,oe=Tr({signalPath:P,instanceKey:T,evaluateExpression:(D,Y)=>{let se=V,ze=Y??this;return Function("$","el",`return ${D}`)(se,ze)}});H([["_rocket",{}]]),H([[`_rocket.${w}`,{}]]);let K={},J={};z(this,v,!0);for(let[D,Y]of O(this,y)){let se=ae(D),ze=this.getAttribute(se),Te,Nt=[];if(ze!==null){let Ir=Y.name==="boolean"&&ze===""?"true":ze;Te=Y.decode(Ir),Y.validate(Te)||(Nt.push({attr:D,codec:Y.name==="chain"?"validation":Y.name,value:Te}),Te=O(this,m).get(D)),this.setAttribute(se,Y.encode(Te))}else Te=O(this,m).get(D),this.setAttribute(se,Y.encode(Te));K[D]=Te,Nt.length>0&&(J[D]=Nt)}z(this,v,!1),K.computed={},Object.keys(J).length>0&&(K.errs=J),K.hasErrs=Object.keys(J).length>0,z(this,v,!0),H([[`_rocket.${w}.${O(this,h)}`,K]]),z(this,v,!1);let me=document.createElement("template");me.innerHTML=a;let le=me.content.cloneNode(!0);le.querySelectorAll("script").forEach(D=>{D.remove()});let j=document.createElement("div");j.setAttribute(_r,""),j.setAttribute("data-rocket-instance",`${n}_${O(this,h)}`),j.append(le);let ke=[j,...j.querySelectorAll("*")];for(let D of ke){let Y=[];for(let se of D.attributes)(ln(se.name)||se.name.startsWith(Tt))&&Y.push(se.name);Y.forEach(se=>{D.removeAttribute(se)})}$t(e,j,w,O(this,h)),x&&R&&k&&Or(j,k,R),rn(e,this,w,O(this,h)),b.append(j);let Pe=fs(b,{nestedSetup:oe});if(z(this,g,Pe),u){let D=hs(u,w,O(this,h),{...i,...Object.fromEntries(s.entries())},this,{$:V,effect:I,computed:Ie,actions:Xe});D.cleanup&&O(this,f).push(D.cleanup)}for(let D of Pe)D.render(),O(this,f).push(D.cleanup);let $e=document.createDocumentFragment(),hn=[];for(;j.firstChild;){let D=j.firstChild;hn.push(D),$e.appendChild(D)}if(j.replaceWith($e),rn(e,this,w,O(this,h)),b instanceof ShadowRoot)Se(b);else if(!Hn())for(let D of hn)(D instanceof HTMLElement||D instanceof SVGElement)&&Se(D,!1);queueMicrotask(()=>{Lt(this,F,pn).call(this,P,T,oe)})}disconnectedCallback(){let E=be(n),A=at(E,O(this,h));this.removeEventListener("datastar:scope-children",O(this,N));for(let $ of O(this,p))$();z(this,p,[]);for(let $ of O(this,f))$();z(this,f,[]),H([[`_rocket.${E}.${O(this,h)}`,null]]),Ct.delete(A),z(this,g,[])}}h=new WeakMap,f=new WeakMap,p=new WeakMap,g=new WeakMap,y=new WeakMap,m=new WeakMap,v=new WeakMap,N=new WeakMap,M=new WeakMap,F=new WeakSet,pn=function(E,A,$){if(this.querySelectorAll("[data-if]").length===0&&O(this,p).length>0)return;for(let k of O(this,p))k();z(this,p,[]);let T=Xo(this,E,(k,P)=>{let q=V,oe=P??this;return Function("$","el",`return ${k}`)(q,oe)},A,$),x=T.pop(),R=[];for(let k of T)k(!0,this);for(let k of T){let P=I(k);P&&R.push(P)}x&&R.push(x),z(this,p,R)},customElements.define(n,d),$r.set(n,d)}function vs(e){let t=[],n=[],r=/\b(?:const|let|var)\s+([^;]+)/g,o=/\bfunction\s+([A-Za-z_$][\w$]*)\s*\(/g,s;for(;s=r.exec(e);){let l=s[1];for(let u of l.split(",")){let c=u.trim();if(!c)continue;let d=c.split("=")[0]?.trim();d&&/^[A-Za-z_$][\w$]*$/.test(d)&&t.push(d)}}for(;s=o.exec(e);){let l=s[1];l&&/^[A-Za-z_$][\w$]*$/.test(l)&&n.push(l)}let i=Array.from(new Set([...t,...n]));return new Function(`
    ${e}
    // Return all const/let/var declarations as an object
    const result = {};
    ${i.map(l=>`if (typeof ${l} !== 'undefined') result.${l} = ${l};`).join(`
`)}
    return result;
  `)()}var Ss=0;function Es(){return`id${++Ss}`}var Cr=e=>{if(!(e instanceof HTMLTemplateElement))return!1;for(let t of e.attributes)if(t.name.startsWith("data-rocket:"))return!0;return!1},Rr=e=>{e instanceof HTMLTemplateElement&&Cr(e)&&Se(e),e.querySelectorAll("template").forEach(n=>{Cr(n)&&Se(n)})},kr=()=>{Rr(document),new MutationObserver(t=>{for(let n of t)for(let r of n.addedNodes)r instanceof HTMLElement&&Rr(r)}).observe(document.body,{childList:!0,subtree:!0})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",kr):kr();var As=location.hostname,Ts=[atob("ZGF0YS1zdGFyLmRldg=="),atob("bG9jYWxob3N0"),atob("MTI3LjAuMC4x")];Ts.includes(As)||alert(atob("VEhJUyBWRVJTSU9OIE9GIERBVFNUQVIgUFJPIGlTIEZPUiBERU1PIFBVUlBPU0VTIE9OTFkh"));export{G as action,Xe as actions,_ as attribute,W as beginBatch,Ie as computed,I as effect,U as endBatch,Z as filtered,He as getPath,Q as mergePatch,H as mergePaths,V as root,Je as signal,ee as startPeeking,te as stopPeeking,et as watcher};
